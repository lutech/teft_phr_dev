
<div class="genericform-style read-only">
<h2>Services</h2>

<div class="form-panelbar-content">



<fieldset class="table-filter" style="display:none">
    <legend>Filter</legend>
    <div class="form-group float-right">
        <input id="showDeletedServices" type="checkbox" checked="checked">
        <label for="showDeletedServices" class="auto-width">Show Deleted Services</label>
    </div>
</fieldset>


<div id="servicesListDiv">
<div id="flexibleServicesTable_wrapper" class="dataTables_wrapper" role="grid"></div><table class="inline-dataTable two-form-group-alternate dataTable" id="flexibleServicesTable" summary="Flexible Services">
    <caption class="caption-header"><span>Flexible Services</span></caption><thead><tr role="form-group"><th width="20%" class="ui-state-default" role="columnheader" tabindex="0" aria-controls="flexibleServicesTable" form-groupspan="1" colspan="1" aria-label="POS Service: activate to sort column ascending"><div class="DataTables_sort_wrapper">POS Service<span class="DataTables_sort_icon css_right ui-icon ui-icon-carat-2-n-s"></span></div></th><th width="10%" class="ui-state-default" role="columnheader" tabindex="0" aria-controls="flexibleServicesTable" form-groupspan="1" colspan="1" aria-label="Service Type: activate to sort column ascending"><div class="DataTables_sort_wrapper">Service Type<span class="DataTables_sort_icon css_right ui-icon ui-icon-carat-2-n-s"></span></div></th><th width="17%" class="ui-state-default" role="columnheader" tabindex="0" aria-controls="flexibleServicesTable" form-groupspan="1" colspan="1" aria-label="Provider Name: activate to sort column ascending"><div class="DataTables_sort_wrapper">Provider Name<span class="DataTables_sort_icon css_right ui-icon ui-icon-carat-2-n-s"></span></div></th><th width="10%" class="ui-state-default" role="columnheader" tabindex="0" aria-controls="flexibleServicesTable" form-groupspan="1" colspan="1" aria-label="Units: activate to sort column ascending"><div class="DataTables_sort_wrapper">Units<span class="DataTables_sort_icon css_right ui-icon ui-icon-carat-2-n-s"></span></div></th><th width="7%" class="ui-state-default" role="columnheader" tabindex="0" aria-controls="flexibleServicesTable" form-groupspan="1" colspan="1" aria-label="Frequency: activate to sort column ascending"><div class="DataTables_sort_wrapper">Frequency<span class="DataTables_sort_icon css_right ui-icon ui-icon-carat-2-n-s"></span></div></th><th width="7%" data-sorttype="currency" class="ui-state-default" role="columnheader" tabindex="0" aria-controls="flexibleServicesTable" form-groupspan="1" colspan="1" aria-label="Rate: activate to sort column ascending"><div class="DataTables_sort_wrapper">Rate<span class="DataTables_sort_icon css_right ui-icon ui-icon-carat-2-n-s"></span></div></th><th width="8%" data-sorttype="currency" class="ui-state-default" role="columnheader" tabindex="0" aria-controls="flexibleServicesTable" form-groupspan="1" colspan="1" aria-label="Annual: activate to sort column ascending"><div class="DataTables_sort_wrapper">Annual<span class="DataTables_sort_icon css_right ui-icon ui-icon-carat-2-n-s"></span></div></th><th width="10%" class="hide-for-print ui-state-default" role="columnheader" form-groupspan="1" colspan="1" aria-label="Actions"><div class="DataTables_sort_wrapper">Actions<span class="DataTables_sort_icon"></span></div></th></tr></thead>
    <tfoot></tfoot><tbody><tr class="odd"><td valign="top" colspan="8" class="dataTables_empty">No data available in table</td></tr></tbody></table>

<div class="form-group table-total">
        <span class="float-right">
            <strong>Cost of Flexible Services: </strong>
            $0.00
        </span>
</div>

<div id="nonFlexibleServicesTable_wrapper" class="dataTables_wrapper" role="grid"></div><table class="inline-dataTable two-form-group-alternate dataTable" id="nonFlexibleServicesTable" summary="Non-Flexible Services" style="margin-top: -5px;
">
    <caption class="caption-header"><span>Non-Flexible Services</span></caption><thead><tr role="form-group"><th width="20%" class="ui-state-default" role="columnheader" tabindex="0" aria-controls="nonFlexibleServicesTable" form-groupspan="1" colspan="1" aria-label="POS Service: activate to sort column ascending"><div class="DataTables_sort_wrapper">POS Service<span class="DataTables_sort_icon css_right ui-icon ui-icon-carat-2-n-s"></span></div></th><th width="10%" class="ui-state-default" role="columnheader" tabindex="0" aria-controls="nonFlexibleServicesTable" form-groupspan="1" colspan="1" aria-label="Service Type: activate to sort column ascending"><div class="DataTables_sort_wrapper">Service Type<span class="DataTables_sort_icon css_right ui-icon ui-icon-carat-2-n-s"></span></div></th><th width="17%" class="ui-state-default" role="columnheader" tabindex="0" aria-controls="nonFlexibleServicesTable" form-groupspan="1" colspan="1" aria-label="Provider Name: activate to sort column ascending"><div class="DataTables_sort_wrapper">Provider Name<span class="DataTables_sort_icon css_right ui-icon ui-icon-carat-2-n-s"></span></div></th><th width="10%" class="ui-state-default" role="columnheader" tabindex="0" aria-controls="nonFlexibleServicesTable" form-groupspan="1" colspan="1" aria-label="Units: activate to sort column ascending"><div class="DataTables_sort_wrapper">Units<span class="DataTables_sort_icon css_right ui-icon ui-icon-carat-2-n-s"></span></div></th><th width="7%" class="ui-state-default" role="columnheader" tabindex="0" aria-controls="nonFlexibleServicesTable" form-groupspan="1" colspan="1" aria-label="Frequency: activate to sort column ascending"><div class="DataTables_sort_wrapper">Frequency<span class="DataTables_sort_icon css_right ui-icon ui-icon-carat-2-n-s"></span></div></th><th width="7%" data-sorttype="currency" class="ui-state-default" role="columnheader" tabindex="0" aria-controls="nonFlexibleServicesTable" form-groupspan="1" colspan="1" aria-label="Rate: activate to sort column ascending"><div class="DataTables_sort_wrapper">Rate<span class="DataTables_sort_icon css_right ui-icon ui-icon-carat-2-n-s"></span></div></th><th width="8%" data-sorttype="currency" class="ui-state-default" role="columnheader" tabindex="0" aria-controls="nonFlexibleServicesTable" form-groupspan="1" colspan="1" aria-label="Annual: activate to sort column ascending"><div class="DataTables_sort_wrapper">Annual<span class="DataTables_sort_icon css_right ui-icon ui-icon-carat-2-n-s"></span></div></th><th width="10%" class="hide-for-print ui-state-default" role="columnheader" form-groupspan="1" colspan="1" aria-label="Actions"><div class="DataTables_sort_wrapper">Actions<span class="DataTables_sort_icon"></span></div></th></tr></thead><tfoot></tfoot><tbody><tr data-plan-service-id="planservices/29795" role="form-group" class="odd"><td role="gridcell" class=" "><span class="data-element">Assisted Living Level 2 w/o AMDC</span></td><td role="gridcell" class=" "><span class="data-element">Waiver Service</span></td><td role="gridcell" class=" "><span class="data-element">VORIZEN ASSISTED LIVING</span></td><td role="gridcell" class=" "><span class="data-element">5 days per week</span></td><td role="gridcell" class=" "><span class="data-element">44 weeks</span></td><td role="gridcell" class=" ">

            $58.52</td><td role="gridcell" class=" ">

            $12,874.40</td><td role="gridcell" class=" "><a href="javascript:showPlanServicePopup('planservices/29795')">Quick View</a></td></tr><tr data-parent-of-plan-service-id="planservices/29795"><td class="classGivenToAddedTr" colspan="8"><span class="comment">Comment: FOR ALF: THERE IS NO SEPARATE COVERAGE FOR NURSE MONITORING FOR ALF PLACEMENTS: Nurse monitoring every 45 days provided by ALF delegated nurse</span>
        </td></tr><tr data-plan-service-id="planservices/29796" role="form-group" class="even"><td role="gridcell" class=" "><span class="data-element">Supports Planning</span></td><td role="gridcell" class=" "><span class="data-element">Community First Choice</span></td><td role="gridcell" class=" "><span class="data-element">BALTIMORE CO DEPART OF AGING</span></td><td role="gridcell" class=" "><span class="data-element">52 hours per year</span></td><td role="gridcell" class=" "><span class="data-element">1 year</span></td><td role="gridcell" class=" ">

            $15.0060</td><td role="gridcell" class=" ">

            $3,121.25</td><td role="gridcell" class=" "><a href="javascript:showPlanServicePopup('planservices/29796')">Quick View</a></td></tr><tr data-parent-of-plan-service-id="planservices/29796"><td class="classGivenToAddedTr" colspan="8"><span class="comment">Comment: </span>
        </td></tr><tr data-plan-service-id="planservices/39594" role="form-group" class="odd"><td role="gridcell" class=" "><span class="data-element">Disposable Medical Supplies</span></td><td role="gridcell" class=" "><span class="data-element">State Plan Service</span></td><td role="gridcell" class=" "><span class="data-element">AMERICAN MEDICAL EQUIPMENT</span></td><td role="gridcell" class=" "><span class="data-element">1 item</span></td><td role="gridcell" class=" "><span class="data-element">10 months</span></td><td role="gridcell" class=" ">

            $227.40</td><td role="gridcell" class=" ">

            $2,274.00</td><td role="gridcell" class=" "><a href="javascript:showPlanServicePopup('planservices/39594')">Quick View</a></td></tr><tr data-parent-of-plan-service-id="planservices/39594"><td class="classGivenToAddedTr" colspan="8"><span class="comment">Comment: Pull-ups @ $176.40; under pads @ $51</span>
        </td></tr><tr data-plan-service-id="planservices/39597" role="form-group" class="even"><td role="gridcell" class=" "><span class="data-element">Technology â€” Other</span></td><td role="gridcell" class=" "><span class="data-element">Community First Choice</span></td><td role="gridcell" class=" "><span class="data-element">AMERICAN MEDICAL EQUIPMENT</span></td><td role="gridcell" class=" "><span class="data-element">1 hour</span></td><td role="gridcell" class=" "><span class="data-element">0 weeks</span></td><td role="gridcell" class=" ">

            $287.52</td><td role="gridcell" class=" ">

            $0.00</td><td role="gridcell" class=" "><a href="javascript:showPlanServicePopup('planservices/39597')">Quick View</a></td></tr><tr data-parent-of-plan-service-id="planservices/39597"><td class="classGivenToAddedTr" colspan="8"><span class="comment">Comment: Wipes @ $71.88 per case; one case every 3 months</span>
        </td></tr><tr data-plan-service-id="planservices/39598" role="form-group" class="odd"><td role="gridcell" class=" "><span class="data-element">Medical Day Care</span></td><td role="gridcell" class=" "><span class="data-element">Waiver Service</span></td><td role="gridcell" class=" "><span class="data-element">LEVINDALE ADULT TRTMT CTR</span></td><td role="gridcell" class=" "><span class="data-element">2 days per week</span></td><td role="gridcell" class=" "><span class="data-element">44 weeks</span></td><td role="gridcell" class=" ">

            $73.58</td><td role="gridcell" class=" ">

            $6,475.04</td><td role="gridcell" class=" "><a href="javascript:showPlanServicePopup('planservices/39598')">Quick View</a></td></tr><tr data-parent-of-plan-service-id="planservices/39598"><td class="classGivenToAddedTr" colspan="8"><span class="comment">Comment: AMDC 2x a week</span>
        </td></tr><tr data-plan-service-id="planservices/39602" role="form-group" class="even"><td role="gridcell" class=" "><span class="data-element">Assisted Living Level 2 w/ AMDC</span></td><td role="gridcell" class=" "><span class="data-element">Waiver Service</span></td><td role="gridcell" class=" "><span class="data-element">VORIZEN ASSISTED LIVING</span></td><td role="gridcell" class=" "><span class="data-element">2 days per week</span></td><td role="gridcell" class=" "><span class="data-element">44 weeks</span></td><td role="gridcell" class=" ">

            $43.90</td><td role="gridcell" class=" ">

            $3,863.20</td><td role="gridcell" class=" "><a href="javascript:showPlanServicePopup('planservices/39602')">Quick View</a></td></tr><tr data-parent-of-plan-service-id="planservices/39602"><td class="classGivenToAddedTr" colspan="8"><span class="comment">Comment: </span>
        </td></tr></tbody></table>



<script src="/ltss/WebSites/MDHotFixQC/Ltss.Web/Scripts/accounting.min.js" type="text/javascript"></script>
<script src="/ltss/WebSites/MDHotFixQC/Ltss.Web/Scripts/knockout-groupedoptions.js" type="text/javascript"> </script>

<script id="PlanOfServiceTemplate" type="text/html">
    <fieldset class="fieldset-container-one" id="serviceInfo">
        <legend class="legend-header-one">Service Information</legend>
        <div class="form-group" data-bind="visible: InQuickView()">
            <label for="ServiceName" class="complete-required" data-bind="updateCompleteRequired: true">POS Service:</label>
            <input id="ServiceName" name="ServiceServiceName" type="text" data-bind="value: ServiceName" class="" />
        </div>
        <div class="form-group" data-bind="visible: !InQuickView()">
            <label for="Service_ServiceId" class="complete-required" data-bind="updateCompleteRequired: true">POS Service:</label>
            <select id="Service_ServiceId" name="Service.ServiceId" class="required selector-large"
                    data-bind="groupedOptions: $root.serviceDataList, optionsText: 'Text', optionsValue: 'Value', optionsGroup: 'Group', optionsCaption: ' ', value: ServiceDataId">
            </select>
            <span class="field-validation-valid"
                  data-valmsg-replace="true"
                  data-valmsg-for="Service.ServiceId"
                  data-valmsg="POS Service is required."></span>
        </div>
        <div class="form-group" data-bind="visible: PlanOfServiceType().Name">
            <span class="label">Service Type:</span><span class="data-element readonly" data-bind="text: PlanOfServiceType().Name"></span>
        </div>
        <div class="form-group" data-bind="visible: IsSharedAttendantCare()">
            <label for="Service_SharingClientName" class="complete-required" data-bind="updateCompleteRequired: true">Client Sharing this Service:</label>
            <input type="text" id="Service_SharingClientName" name="Service.SharingClientName" data-bind="value: SharingClient().ClientName()" class="required readonly re-validate" readonly="readonly" />
            <input id="clientSearchButton" type="button" value="Search" data-bind="click: $root.clickClientSearchButton" />
            <input id="clearClientSearchButton" type="button" value="Clear" data-bind="visible:canClearSharingClient(), click: clearSharingClient" />
            <span class="field-validation-valid" data-valmsg-replace="true" data-valmsg-for="Service.SharingClientName" data-valmsg="Sharing client Name is required."></span>
        </div>
        <div class="form-group" data-bind="visible: IsSharedAttendantCare() && SharingClient().ClientId()">
            <span class="label">Client ID:</span>
            <span data-bind="text: SharingClient().ClientIdentifier()"></span>
            &nbsp;<a data-bind="if:SharingClient().ClientId(), attr: { href:SharingClient().ProfileLink, target:'_blank' }">Client Summary</a>
        </div>
        <div class="form-group" data-bind="visible: IsTransitionService()">
            <label for="Service_TransitionServiceId" data-bind="css: { 'complete-required': !$root.isProvisional }, updateCompleteRequired: !$root.isProvisional">Specify:</label>
            <select id="Service_TransitionServiceId" name="Service.TransitionServiceId" class="required selector-large" data-bind="value: TransitionServiceTypeId, options: $root.transitionServiceTypes, optionsText: 'Text', optionsValue: 'Value', optionsCaption: ' ' , css: { required: !$root.isProvisional }"></select>
            <span class="field-validation-valid" data-valmsg-replace="true" data-valmsg-for="Service.TransitionServiceId" data-valmsg="Transition service type is required."></span>
        </div>
        <div class="form-group" data-bind="visible: IsTransitionService() && IsTransitionServiceTypeOther()">
            <label for="Service_TransitionServiceOther" data-bind="css: { 'complete-required': !$root.isProvisional }, updateCompleteRequired: !$root.isProvisional">Specify Other:</label>
            <textarea id="Service_TransitionServiceOther" name="Service.TransitionServiceOther" class="comments-textarea" data-bind="value: TransitionServiceTypeSpecifyOther, css: { required: !$root.isProvisional }" />
            <span class="field-validation-valid" data-valmsg-replace="true" data-valmsg-for="Service.TransitionServiceOther" data-valmsg="Specify other is required."></span>
        </div>
        <div class="form-group" data-bind="visible: IsMfpFlexibleFunds()">
            <label for="Service_MfpFlexibleFundsServiceTypeId" data-bind="css: { 'complete-required': !$root.isProvisional }, updateCompleteRequired: !$root.isProvisional">Specify:</label>
            <select id="Service_MfpFlexibleFundsServiceTypeId" name="Service.MfpFlexibleFundsServiceTypeId" class="required selector-large" data-bind="value: MfpFlexibleFundsServiceTypeId, options: $root.mfpFlexibleFundsServiceTypes, optionsText: 'Text', optionsValue: 'Value', optionsCaption: ' ' , css: { required: !$root.isProvisional }"></select>
            <span class="field-validation-valid" data-valmsg-replace="true" data-valmsg-for="Service.MfpFlexibleFundsServiceTypeId" data-valmsg="MFP Flexible Funds service type is required."></span>
        </div>
        <fieldset class="fieldset-container-two" id="FrequencyInfo" data-bind="visible: TemplateToUse">
            <legend class="legend-header-two">Frequency Type</legend>
            <div class="form-group" id="calculationInputs" data-bind="template: { name: TemplateToUse(), data: $data }"></div>
            <div class="form-group" data-bind="visible: IsNurseMonitoring() && !$root.hideNurseMonitoringFrequency">
                <label for="Service_NoOfNurseMonitoringDays" data-bind="css: { 'complete-required': !$root.isProvisional }, updateCompleteRequired: !$root.isProvisional">Nurse Monitoring will be performed every: </label>
                <input id="Service_NoOfNurseMonitoringDays" name="Service.NoOfNurseMonitoringDays" type="text" data-bind="value: NOfDaysNurseMonitoringWillBePerformed, css: {required: !$root.isProvisional} " class="digits textbox-small" />
                (days).
                <span class="field-validation-valid" data-valmsg-replace="true" data-valmsg-for="Service.NoOfNurseMonitoringDays"></span>
            </div>
            <div class="form-group">
                <label for="AnnualCost">Annual Cost ($):</label>
                <input id="AnnualCost" class="textbox-small" type="text" readonly="readonly" data-bind="value: AnnualTotal" />
            </div>
        </fieldset>
    </fieldset>
    <fieldset class="fieldset-container-one" id="providerInfo">
        <legend class="legend-header-one">Provider Information</legend>
        <div class="form-group" data-bind="visible: !UseFiProvider()">
            <label for="ProviderFacilityName" data-bind="css: { 'submit-required' : ProviderRequiredForSubmit }, updateSubmitRequired: ProviderRequiredForSubmit">Provider Name:</label>
            <input type="text" name="ProviderFacilityName" id="ProviderFacilityName" data-bind="value: ProviderLocationName" class="readonly re-validate" readonly="readonly" />
            <input id="fakeOpenServiceProviderSearchButton" type="button" value="Search" data-bind="visible: !IsNurseMonitoring() , click: $root.clickProviderSearchButton" />
            <input id="clearServiceProviderButton" type="button" value="Clear" data-bind="visible: canClearProvider() && !IsNurseMonitoring() , click: clearProviderInfo" />
            <span class="field-validation-valid" data-valmsg-replace="true" data-valmsg-for="ProviderFacilityName" data-valmsg="Provider Name is required."></span>
        </div>
        <div data-bind="if: UseFiProvider() && !InQuickView()">
            <div class="form-group">
                <label for="fi_ProviderFacilityName" data-bind="css: { 'submit-required' : ProviderRequiredForSubmit }, updateSubmitRequired: ProviderRequiredForSubmit">Provider Name:</label>
                <select id="fi_ProviderFacilityName" name="fi.ProviderFacilityName" class="selector-large" data-bind="value: ProviderFacilityLocationId, options: $root.fiProviders, optionsText: 'Text', optionsValue: 'Value', optionsCaption: ' '"></select>
                <span class="field-validation-valid" data-valmsg-replace="true" data-valmsg-for="fi.ProviderFacilityName" data-valmsg="Provider Name is required."></span>
            </div>
        </div>
        <div data-bind="if: UseFiProvider() && InQuickView()">
            <div class="form-group">
                <label for="fi_ProviderFacilityNameQuickView" data-bind="css: { 'submit-required' : ProviderRequiredForSubmit }, updateSubmitRequired: ProviderRequiredForSubmit">Provider Name:</label>
                <input id="fi_ProviderFacilityNameQuickView" name="fi_ProviderFacilityNameQuickView" type="text" data-bind="value: ProviderLocationName" class="" />
            </div>
        </div>
        <div data-bind="if: !UseFiProvider()">
            <div class="form-group" data-bind="visible: ProviderLocationNumber">
                <label for="ProviderFacilityNumber">Provider Number:</label>
                <input type="text" name="ProviderFacilityNumber" id="ProviderFacilityNumber" data-bind="value: ProviderLocationNumber" readonly="readonly" />
            </div>
        </div>
        <div data-bind="if: !UseFiProvider()">
            <div class="form-group" data-bind="visible: ProviderLocationTypeName">
                <label for="ProviderLocationTypeName">Provider Type:</label>
                <input type="text" name="ProviderLocationTypeName" id="ProviderLocationTypeName" data-bind="value: ProviderLocationTypeName" readonly="readonly" />
            </div>
        </div>
        <div class="form-group">
            <label for="ServiceDetailsReason">Reason for Service/Details:</label>
            <textarea id="ServiceDetailsReason" class="comments-textarea" data-bind="value: ServiceReasonDescription"></textarea>
        </div>
    </fieldset>

    <!-- ko if: CanEmergencyBackupBill() -->
    <fieldset class="fieldset-container-one">
        <legend class="legend-header-one">Emergency Back-ups</legend>
        <div class="header-info">
            <span class="icon-info-sign" title="Note"></span>Note: All Medicaid enrolled emergency back-ups will have the ability to bill for the service through ISAS.
        </div>
        <ul>
        </ul>
    </fieldset>
    <!-- /ko -->
</script>

<script id="FrequencyList" type="text/html">
    <div class="form-group">
        <fieldset class="grouped-radiobuttons">
            <legend role="presentation" class="ui-hide">Frequency Type:</legend>
            <!-- ko foreach: FrequencyDataList -->
            <input type="radio" name="FrequencyType" data-bind="attr: { id: 'frequency_' + $index() }, value: FrequencyType().Name, checked: $parent.FrequencyType().Name" />
            <label class="grouped-radiobuttons-label" data-bind="attr: { for: 'frequency_' + $index() }, text: FrequencyType().DisplayName" />
            <!-- /ko -->
        </fieldset>
    </div>
</script>


<script id="Days Per Week" type="text/html">
    <div data-bind="template: { name: 'FrequencyList', data: $data }"></div>
    <div data-bind="template: { name: 'Days Per Week Subtemplate', data: $data }"></div>
</script>

<script id="Hours Per Week" type="text/html">
    <div data-bind="template: { name: 'FrequencyList', data: $data }"></div>
    <div data-bind="template: { name: 'Hours Per Week Subtemplate', data: $data }"></div>
</script>

<script id="Hours Per Day" type="text/html">
    <div data-bind="template: { name: 'FrequencyList', data: $data }"></div>
    <div data-bind="template: { name: 'Hours Per Day Subtemplate', data: $data }"></div>
</script>

<script id="One Time Purchase" type="text/html">
    <div data-bind="template: { name: 'FrequencyList', data: $data }"></div>
    <fieldset class="fieldset-container-three">
        <legend>Specify frequency:</legend>
        <div class="form-group">
            <label for="Service_ItemDescription">Description for one-time service:</label>
            <textarea class="comments-textarea" cols="20" data-bind="value: ItemDescription" id="Service_ItemDescription" name="Service.ItemDescription" form-groups="2">
            </textarea>
            <span class="field-validation-valid" data-valmsg-for="Service.ItemDescription" data-valmsg-replace="true"></span>
        </div>
        <div class="form-group">
            <label class="submit-required" for="Service_Rate">Rate ($):</label>
            <input class="number textbox-small" data-bind="value: Rate, enable: CanEditRate" data-val="true" data-val-number="The field Rate must be a number." id="Service_Rate" name="Service.Rate" type="text" value="0" />
            <span data-bind="text: RateFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Rate" data-valmsg-replace="true"></span>
        </div>
        <div class="form-group">
            <label class="submit-required" for="Service_Units">Item(s):</label>
            <input class="digits textbox-small" data-bind="value: Units" data-val="true" data-val-number="The field Units must be a number." id="Service_Units" name="Service.Units" type="text" value="0" />
            <span data-bind="text: UnitsFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Units" data-valmsg-replace="true"></span>
        </div>
    </fieldset>
</script>

<script id="Multiple Purchase Items" type="text/html">
    <div data-bind="template: { name: 'FrequencyList', data: $data }"></div>
    <fieldset class="fieldset-container-three">
        <legend>Specify weekly frequency:</legend>
        <div class="form-group">
            <label for="Service_ItemDescription">Item Description:</label>
            <textarea class="comments-textarea" cols="20" data-bind="value: ItemDescription" id="Service_ItemDescription" name="Service.ItemDescription" form-groups="2">
            </textarea>
            <span class="field-validation-valid" data-valmsg-for="Service.ItemDescription" data-valmsg-replace="true"></span>
        </div>
        <div class="form-group">
            <label class="submit-required" for="Service_Units">Items Per Week:</label>
            <input class="digits textbox-small" data-bind="value: Units" id="Service_Units" name="Service.Units" type="text" value="0" />
            <span data-bind="text: UnitsFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Units" data-valmsg-replace="true"></span>
        </div>
        <div class="form-group">
            <label class="submit-required" for="Service_Frequency">How many weeks:</label>
            <input class="digits textbox-small" data-bind="value: Frequency" data-val="true" data-val-number="The field Frequency must be a number." id="Service_Frequency" name="Service.Frequency" type="text" value="0" />
            <span data-bind="text: FrequencyFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Frequency" data-valmsg-replace="true"></span>
        </div>
        <div class="form-group">
            <label class="submit-required" for="Service_Rate">Rate ($):</label>
            <input class="number textbox-small" data-bind="value: Rate, enable: CanEditRate" id="Service_Rate" name="Service.Rate" type="text" value="0" />
            <span data-bind="text: RateFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Rate" data-valmsg-replace="true"></span>
        </div>
    </fieldset>
</script>

<script id="Day Units Per Year" type="text/html">
    <div data-bind="template: { name: 'FrequencyList', data: $data }"></div>
    <div data-bind="template: { name: DayUnitsPerYearTemplate(), data: $data }"></div>
</script>

<script id="Random Time Period" type="text/html">
    <div data-bind="template: { name: 'FrequencyList', data: $data }"></div>
    <div data-bind="template: { name: RandomTimePeriodTemplate(), data: $data }"></div>
</script>

<script id="Random Time Period Unit Factor" type="text/html">
    <div data-bind="template: { name: 'FrequencyList', data: $data }"></div>
    <div data-bind="template: { name: RandomTimePeriodUnitFactorTemplate(), data: $data }"></div>
</script>

<script id="Per Month Items" type="text/html">
    <div data-bind="template: { name: 'FrequencyList', data: $data }"></div>
    <fieldset class="fieldset-container-three">
        <legend>Specify monthly frequency:</legend>
        <div class="form-group">
            <label class="submit-required" for="Service_PreCalculatedUnitsHours">
                Hours per month:</label>
            <input type="text" id="Service_PreCalculatedUnitsHours" name="Service.PreCalculatedUnitsHours" data-bind="value: PreCalculatedUnits.integer" class="frequency digits textbox-small">
            Hours &nbsp;&nbsp;
            <span class="field-validation-valid" data-valmsg-for="Service.PreCalculatedUnitsHours" data-valmsg-replace="true"></span>
            <label class="ui-hide" for="Service_PrecalculatedUnitsMinutes">
                Minutes:</label>
            <select id="Service_PrecalculatedUnitsMinutes" name="Service.PrecalculatedUnitsMinutes" class="selector-small"
                    data-bind="value: PreCalculatedUnits.fraction, options: minuteIntervals, optionsText: 'Text', optionsValue: 'Minutes'">
            </select>
            Minutes&nbsp;&nbsp;
            <span data-bind="text: PreCalculatedUnitsDisplayText"></span>
        </div>
        <div class="form-group">
            <label for="Service_UnitsReadonly_PerMonthItems">How many units:</label>
            <input type="text" id="Service_UnitsReadonly_PerMonthItems" name="Service.UnitsReadonly.PerMonthItems" data-bind="value: UnitsReadonly, disable: true" class="number textbox-small" />
            <span data-bind="text: UnitsFullDisplayText"></span>
        </div>
        <div class="form-group">
            <label class="submit-required" for="Service_Frequency">How many months:</label>
            <input class="digits textbox-small" data-bind="value: Frequency" id="Service_Frequency" name="Service.Frequency" type="text" value="0" />
            <span data-bind="text: FrequencyFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Frequency" data-valmsg-replace="true"></span>
        </div>
        <div class="form-group">
            <label class="submit-required" for="Service_Rate">Rate ($):</label>
            <input class="number textbox-small" data-bind="value: Rate, enable: CanEditRate" id="Service_Rate" name="Service.Rate" type="text" value="0" />
            <span data-bind="text: RateFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Rate" data-valmsg-replace="true"></span>
        </div>
    </fieldset>
</script>

<script id="Other" type="text/html">
    <div data-bind="template: { name: 'FrequencyList', data: $data }"></div>
    <fieldset class="fieldset-container-three">
        <legend>Other:</legend>
        <div class="form-group">
            <label for="Service_ItemDescription">Item Description:</label>
            <textarea class="comments-textarea" cols="20" data-bind="value: ItemDescription" id="Service_ItemDescription" name="Service.ItemDescription" form-groups="2">
            </textarea>
            <span class="field-validation-valid" data-valmsg-for="Service.ItemDescription" data-valmsg-replace="true"></span>
        </div>
        <div class="form-group">
            <span class="label" class="submit-required" style="margin-top: 0px">
                <label data-bind="text: &#39;How many&#39;" for="Other_Type">How many</label>
                <select id="Other_Type" name="Service.OtherUnitType" class="selector-small"
                        data-bind="value: UnitType().Name, options: $root.unitTypes, optionsText: 'Text', optionsValue: 'Value'">
                </select>
            </span>
            <label class="ui-hide" data-bind="text: &#39;How many &#39; + UnitType().Name()" for="Service_Units">How many</label>
            <input class="digits textbox-small" data-bind="value: Units" name="Service.Units" type="text" value="0" />
            <span data-bind="text: OtherServiceUnitsFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Units" data-valmsg-replace="true"></span>
        </div>
        <!-- ko template: { name: OtherTemplate(), data: $data } --> <!-- /ko -->
        <div class="form-group">
            <label class="submit-required" for="Service_Rate">Rate ($):</label>
            <input class="number textbox-small" data-bind="value: Rate, enable: CanEditRate" id="Service_Rate" name="Service.Rate" type="text" value="0" />
            <span data-bind="text: RateFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Rate" data-valmsg-replace="true"></span>
        </div>
    </fieldset>
</script>

<script id="Other Monthly Items" type="text/html">
    <div data-bind="template: { name: 'FrequencyList', data: $data }"></div>
    <fieldset class="fieldset-container-three">
        <legend>Other:</legend>
        <div class="form-group">
            <label class="submit-required" for="Service_Units">How many items:</label>
            <input class="digits textbox-small" data-bind="value: Units" id="Service_Units" name="Service.Units" type="text" value="0" />
            <span data-bind="text: UnitsFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Units" data-valmsg-replace="true"></span>
        </div>
        <div class="form-group">
            <label class="submit-required" for="Service_Frequency">How many months:</label>
            <input class="digits textbox-small" data-bind="value: Frequency" id="Service_Frequency" name="Service.Frequency" type="text" value="0" />
            <span data-bind="text: FrequencyFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Frequency" data-valmsg-replace="true"></span>
        </div>
        <div class="form-group">
            <label class="submit-required" for="Service_Rate">Rate ($):</label>
            <input class="number textbox-small" data-bind="value: Rate, enable: CanEditRate" id="Service_Rate" name="Service.Rate" type="text" value="0" />
            <span data-bind="text: RateFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Rate" data-valmsg-replace="true"></span>
        </div>
    </fieldset>
</script>


<script id="Hours Per Day Subtemplate" type="text/html">
    <fieldset class="fieldset-container-three">
        <legend>Specify daily frequency:</legend>
        <div class="form-group">
            <span class="header-info">
                <span class="icon-info-sign" title="Additional info"></span>Daily chart can be used to help calculate weekly hours.
            </span>
            <input id="UseDailyChart" type="checkbox" data-bind="checked: UseDailyChart" />
            <label for="UseDailyChart">Use Daily Chart?</label>
            <hr />
        </div>

        <!-- ko if: UseDailyChart() -->
        <!-- ko template: { name: 'Daily Chart', data: $data } --><!-- /ko -->
        <!-- /ko -->

        <div class="form-group" data-bind="visible: !UseDailyChart()">
            <label class="submit-required" for="Service_HoursPerDay_HoursPerDay">Hours per day:</label>
            <input type="text" id="Service_HoursPerDay_HoursPerDay" name="Service.HoursPerDay.HoursPerDay" data-bind="value: UnitsHoursPerDay.integer" class="digits textbox-small" />
            <span data-bind="text: HoursPerDayDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.HoursPerDay.HoursPerDay" data-valmsg-replace="true"></span>
        </div>

        <div class="form-group" data-bind="visible: !UseDailyChart()">
            <label class="submit-required" for="Service_HoursPerDay_DaysPerWeek">Days per week:</label>
            <input type="text" id="Service_HoursPerDay_DaysPerWeek" name="Service.HoursPerDay.DaysPerWeek" data-bind="value: UnitsDaysPerWeek" class="digits textbox-small" />
            <span data-bind="text: DaysPerWeekDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.HoursPerDay.DaysPerWeek" data-valmsg-replace="true"></span>
        </div>

        <div class="form-group" data-bind="visible: !UseDailyChart()">
            <label for="Service_UnitsReadonly_HoursPerDay">Hours per week:</label>
            <input type="text" id="Service_UnitsReadonly_HoursPerDay" name="Service.UnitsReadonly.HoursPerDay" data-bind="value: UnitsReadonly, disable: true" class="digits textbox-small" />
            <span data-bind="text: UnitsFullDisplayText"></span>
        </div>

        <div class="form-group">
            <label class="submit-required" for="Service_HoursPerDay_Weeks">How many weeks:</label>
            <input type="text" id="Service_HoursPerDay_Weeks" name="Service.HoursPerDay.Weeks" data-bind="value: Frequency" class="digits textbox-small" />
            <span data-bind="text: FrequencyFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.HoursPerDay.Weeks" data-valmsg-replace="true"></span>
        </div>

        <div class="form-group">
            <label class="submit-required" for="Service_HoursPerDay_Rate">Rate ($):</label>
            <input type="text" id="Service_HoursPerDay_Rate" name="Service.HoursPerDay.Rate" data-bind="value: Rate, enable: CanEditRate" class="number textbox-small" />
            <span data-bind="text: RateFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.HoursPerDay.Rate" data-valmsg-replace="true"></span>
        </div>
    </fieldset>
</script>

<script id="Hours Per Week Subtemplate" type="text/html">
    <fieldset class="fieldset-container-three">
        <legend>Specify weekly frequency:</legend>
        <div class="form-group">
            <div class="header-info">
                <span class="icon-info-sign" title="Additional info"></span>Daily chart can be used to help calculate weekly hours.
            </div>
            <input id="DailyChart" type="checkbox" data-bind="checked: UseDailyChart" />
            <label for="DailyChart">Use Daily Chart?</label>
            <hr />
        </div>

        <!-- ko if: UseDailyChart() -->
        <!-- ko template: { name: 'Daily Chart', data: $data } --><!-- /ko -->
        <!-- /ko -->

        <div class="form-group" data-bind="visible: !UseDailyChart()">
            <label class="submit-required" for="Service_HoursPerWeek_Units">Hours per week:</label>
            <input type="text" id="Service_HoursPerWeek_Units" name="Service.HoursPerWeek.Units" data-bind="value: Units" class="digits textbox-small" />
            <span data-bind="text: UnitsFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.HoursPerWeek.Units" data-valmsg-replace="true"></span>
        </div>

        <div class="form-group">
            <label class="submit-required" for="Service_HoursPerWeek_Frequency">How many weeks:</label>
            <input type="text" id="Service_HoursPerWeek_Frequency" name="Service.HoursPerWeek.Frequency" data-bind="value: Frequency" class="digits textbox-small" />
            <span data-bind="text: FrequencyFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.HoursPerWeek.Frequency" data-valmsg-replace="true"></span>
        </div>

        <div class="form-group">
            <label class="submit-required" for="Service_HoursPerWeek_Rate">Rate ($):</label>
            <input type="text" id="Service_HoursPerWeek_Rate" name="Service.HoursPerWeek.Rate" data-bind="value: Rate, enable: CanEditRate" class="number textbox-small" />
            <span data-bind="text: RateFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.HoursPerWeek.Rate" data-valmsg-replace="true"></span>
        </div>
    </fieldset>
</script>

<script id="Hours Per Month Subtemplate" type="text/html">
    <fieldset class="fieldset-container-three">
        <legend>Specify monthly frequency:</legend>
        <div class="form-group">
            <label class="submit-required" for="Service_Units">Hours per month:</label>
            <input class="digits textbox-small" data-bind="value: Units" id="Service_Units" name="Service.Units" type="text" value="0" />
            <span data-bind="text: UnitsFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Units" data-valmsg-replace="true"></span>
        </div>
        <div class="form-group">
            <label class="submit-required" for="Service_Frequency">How many months:</label>
            <input class="digits textbox-small" data-bind="value: Frequency" id="Service_Frequency" name="Service.Frequency" type="text" value="0" />
            <span data-bind="text: FrequencyFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Frequency" data-valmsg-replace="true"></span>
        </div>
        <div class="form-group">
            <label class="submit-required" for="Service_Rate">Rate ($):</label>
            <input class="number textbox-small" data-bind="value: Rate, enable: CanEditRate" id="Service_Rate" name="Service.Rate" type="text" value="0" />
            <span data-bind="text: RateFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Rate" data-valmsg-replace="true"></span>
        </div>
    </fieldset>
</script>

<script id="Hours Per Year Subtemplate" type="text/html">
    <fieldset class="fieldset-container-three">
        <legend>Specify annual frequency:</legend>
        <div class="form-group">
            <label class="submit-required" for="Service_Units">Hours per year:</label>
            <input class="digits textbox-small" data-bind="value: Units" id="Service_Units" name="Service.Units" type="text" value="0" />
            <span data-bind="text: UnitsFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Units" data-valmsg-replace="true"></span>
        </div>
        <div class="form-group">
            <label class="submit-required" for="Service_Frequency">How many years:</label>
            <input class="digits textbox-small" data-bind="value: Frequency" id="Service_Frequency" name="Service.Frequency" type="text" value="0" />
            <span data-bind="text: FrequencyFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Frequency" data-valmsg-replace="true"></span>
        </div>
        <div class="form-group">
            <label class="submit-required" for="Service_Rate">Rate ($):</label>
            <input class="number textbox-small" data-bind="value: Rate, enable: CanEditRate" id="Service_Rate" name="Service.Rate" type="text" value="0" />
            <span data-bind="text: RateFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Rate" data-valmsg-replace="true"></span>
        </div>
    </fieldset>
</script>

<script id="Hours Per Day Unit Factor Subtemplate" type="text/html">
    <fieldset class="fieldset-container-three">
        <legend>Specify daily frequency:</legend>
        <div class="form-group">
            <span class="header-info">
                <span class="icon-info-sign" title="Additional info"></span>Daily chart can be used to help calculate weekly hours.
            </span>
            <input id="UseDailyChart_HoursPerDayUnitFactor" type="checkbox" data-bind="checked: UseDailyChart" />
            <label for="UseDailyChart_HoursPerDayUnitFactor">Use Daily Chart?</label>
            <hr />
        </div>

        <!-- ko if: UseDailyChart() -->
        <!-- ko template: { name: 'Daily Chart With Minutes', data: $data } --><!-- /ko -->
        <!-- /ko -->

        <div class="form-group" data-bind="visible: !UseDailyChart()">
            <label class="submit-required" for="Service_UnitsHoursPerDayInteger">Hours per day:</label>
            <input type="text" id="Service_UnitsHoursPerDayInteger" name="Service.UnitsHoursPerDayInteger" data-bind="value: UnitsHoursPerDay.integer" class="digits textbox-small" />
            <span data-bind="text: HoursPerDayDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.UnitsHoursPerDayInteger" data-valmsg-replace="true"></span>
        </div>

        <div class="form-group" data-bind="visible: !UseDailyChart()">
            <label for="Service_UnitsHoursPerDayFraction">Minutes:</label>
            <select id="Service_UnitsHoursPerDayFraction" name="Service.UnitsHoursPerDayFraction" class="selector-small"
                    data-bind="value: UnitsHoursPerDay.fraction, options: minuteIntervals, optionsText: 'Text', optionsValue: 'Minutes'">
            </select>
        </div>

        <div class="form-group" data-bind="visible: !UseDailyChart()">
            <label class="submit-required" for="Service_UnitsDaysPerWeek_UnitFactor">Days per week:</label>
            <input type="text" id="Service_UnitsDaysPerWeek_UnitFactor" name="Service.UnitsDaysPerWeek.UnitFactor" data-bind="value: UnitsDaysPerWeek" class="digits textbox-small" />
            <span data-bind="text: DaysPerWeekDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.UnitsDaysPerWeek.UnitFactor" data-valmsg-replace="true"></span>
        </div>

        <div class="form-group" data-bind="visible: !UseDailyChart()">
            <label class="submit-required" for="Service_HoursPerWeek_Readonly">Hours Per Week:</label>
            <input type="text" id="Service_HoursPerWeek_Readonly" name="Service.HoursPerWeek.Readonly" data-bind="value: HoursPerWeek, disable: true" class="digits textbox-small" />
            <span data-bind="text: PreCalculatedUnitsDisplayText"></span>
        </div>

        <div class="form-group">
            <label for="Service_HoursPerDayUnitFactor_UnitsReadonly">Units:</label>
            <input type="text" id="Service_HoursPerDayUnitFactor_UnitsReadonly" name="Service.HoursPerDayUnitFactor.UnitsReadonly" data-bind="value: UnitsReadonly, disable: true" class="digits textbox-small" />
            <span data-bind="text: UnitsFullDisplayText"></span>
        </div>

        <div class="form-group">
            <label class="submit-required" for="Service_HoursPerDayUnitFactor_Weeks">How many weeks:</label>
            <input type="text" id="Service_HoursPerDayUnitFactor_Weeks" name="Service.HoursPerDayUnitFactor.Weeks" data-bind="value: Frequency" class="digits textbox-small" />
            <span data-bind="text: FrequencyFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.HoursPerDayUnitFactor.Weeks" data-valmsg-replace="true"></span>
        </div>

        <div class="form-group">
            <label class="submit-required" for="Service_HoursPerDayUnitFactor_Rate">Rate ($):</label>
            <input type="text" id="Service_HoursPerDayUnitFactor_Rate" name="Service.HoursPerDayUnitFactor.Rate" data-bind="value: Rate, enable: CanEditRate" class="number textbox-small" />
            <span data-bind="text: RateFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.HoursPerDayUnitFactor.Rate" data-valmsg-replace="true"></span>
        </div>
    </fieldset>
</script>

<script id="Hours Per Week Unit Factor Subtemplate" type="text/html">
    <fieldset class="fieldset-container-three">
        <legend>Specify weekly frequency:</legend>
        <div class="form-group">
            <div class="header-info">
                <span class="icon-info-sign" title="Additional info"></span>Daily chart can be used to help calculate weekly hours.
            </div>
            <input id="DailyChart_HoursPerWeekUnitFactor" type="checkbox" data-bind="checked: UseDailyChart" />
            <label for="DailyChart_HoursPerWeekUnitFactor">Use Daily Chart?</label>
            <hr />
        </div>

        <!-- ko if: UseDailyChart() -->
        <!-- ko template: { name: 'Daily Chart With Minutes', data: $data } --><!-- /ko -->
        <!-- /ko -->

        <div class="form-group" data-bind="visible: !UseDailyChart()">
            <label class="submit-required" for="Service_HoursPerWeekUnitFactor_UnitsInteger">Hours per week:</label>
            <input type="text" id="Service_HoursPerWeekUnitFactor_UnitsInteger" name="Service.HoursPerWeekUnitFactor.UnitsInteger" data-bind="value: PreCalculatedUnits.integer" class="digits textbox-small" />
            <span data-bind="text: PreCalculatedUnitsDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.HoursPerWeekUnitFactor.UnitsInteger" data-valmsg-replace="true"></span>
        </div>

        <div class="form-group" data-bind="visible: !UseDailyChart()">
            <label for="Service_HoursPerWeekUnitFactor_UnitsFraction">Minutes:</label>
            <select id="Service_HoursPerWeekUnitFactor_UnitsFraction" name="Service.HoursPerWeekUnitFactor.UnitsFraction" class="selector-small"
                    data-bind="value: PreCalculatedUnits.fraction, options: minuteIntervals, optionsText: 'Text', optionsValue: 'Minutes'">
            </select>
        </div>

        <div class="form-group">
            <label for="Service_HoursPerWeekUnitFactor_UnitsReadonly">Units:</label>
            <input type="text" id="Service_HoursPerWeekUnitFactor_UnitsReadonly" name="Service.HoursPerWeekUnitFactor.UnitsReadonly" data-bind="value: UnitsReadonly, disable: true" class="digits textbox-small" />
            <span data-bind="text: UnitsFullDisplayText"></span>
        </div>

        <div class="form-group">
            <label class="submit-required" for="Service_HoursPerWeekUnitFactor_Frequency">How many weeks:</label>
            <input type="text" id="Service_HoursPerWeekUnitFactor_Frequency" name="Service.HoursPerWeekUnitFactor.Frequency" data-bind="value: Frequency" class="digits textbox-small" />
            <span data-bind="text: FrequencyFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.HoursPerWeekUnitFactor.Frequency" data-valmsg-replace="true"></span>
        </div>

        <div class="form-group">
            <label class="submit-required" for="Service_HoursPerWeekUnitFactor_Rate">Rate ($):</label>
            <input type="text" id="Service_HoursPerWeekUnitFactor_Rate" name="Service.HoursPerWeekUnitFactor.Rate" data-bind="value: Rate, enable: CanEditRate" class="number textbox-small" />
            <span data-bind="text: RateFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.HoursPerWeekUnitFactor.Rate" data-valmsg-replace="true"></span>
        </div>
    </fieldset>
</script>

<script id="Hours Per Month Unit Factor Subtemplate" type="text/html">
    <fieldset class="fieldset-container-three">
        <legend>Specify monthly frequency:</legend>
        <div class="form-group">
            <label class="submit-required" for="Service_HoursPerMonthUnitFactor_UnitsInteger">Hours per month:</label>
            <input type="text" id="Service_HoursPerMonthUnitFactor_UnitsInteger" name="Service.HoursPerMonthUnitFactor.UnitsInteger" data-bind="value: PreCalculatedUnits.integer" class="digits textbox-small" />
            <span data-bind="text: PreCalculatedUnitsDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.HoursPerMonthUnitFactor.UnitsInteger" data-valmsg-replace="true"></span>
        </div>
        <div class="form-group">
            <label for="Service_HoursPerMonthUnitFactor_UnitsFraction">Minutes:</label>
            <select id="Service_HoursPerMonthUnitFactor_UnitsFraction" name="Service.HoursPerMonthUnitFactor.UnitsFraction" class="selector-small"
                    data-bind="value: PreCalculatedUnits.fraction, options: minuteIntervals, optionsText: 'Text', optionsValue: 'Minutes'">
            </select>
        </div>
        <div class="form-group">
            <label for="Service_HoursPerMonthUnitFactor_UnitsReadonly">Units:</label>
            <input type="text" id="Service_HoursPerMonthUnitFactor_UnitsReadonly" name="Service.HoursPerMonthUnitFactor.UnitsReadonly" data-bind="value: UnitsReadonly, disable: true" class="digits textbox-small" />
            <span data-bind="text: UnitsFullDisplayText"></span>
        </div>
        <div class="form-group">
            <label class="submit-required" for="Service_Frequency">How many months:</label>
            <input class="digits textbox-small" data-bind="value: Frequency" id="Service_Frequency" name="Service.Frequency" type="text" value="0" />
            <span data-bind="text: FrequencyFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Frequency" data-valmsg-replace="true"></span>
        </div>
        <div class="form-group">
            <label class="submit-required" for="Service_Rate">Rate ($):</label>
            <input class="number textbox-small" data-bind="value: Rate, enable: CanEditRate" id="Service_Rate" name="Service.Rate" type="text" value="0" />
            <span data-bind="text: RateFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Rate" data-valmsg-replace="true"></span>
        </div>
    </fieldset>
</script>

<script id="Hours Per Year Unit Factor Subtemplate" type="text/html">
    <fieldset class="fieldset-container-three">
        <legend>Specify annual frequency:</legend>
        <div class="form-group">
            <label class="submit-required" for="Service_HoursPerYearUnitFactor_UnitsInteger">Hours per year:</label>
            <input type="text" id="Service_HoursPerYearUnitFactor_UnitsInteger" name="Service.HoursPerYearUnitFactor.UnitsInteger" data-bind="value: PreCalculatedUnits.integer" class="digits textbox-small" />
            <span data-bind="text: PreCalculatedUnitsDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.HoursPerYearUnitFactor.UnitsInteger" data-valmsg-replace="true"></span>
        </div>
        <div class="form-group">
            <label for="Service_HoursPerYearUnitFactor_UnitsFraction">Minutes:</label>
            <select id="Service_HoursPerYearUnitFactor_UnitsFraction" name="Service.HoursPerYearUnitFactor.UnitsFraction" class="selector-small"
                    data-bind="value: PreCalculatedUnits.fraction, options: minuteIntervals, optionsText: 'Text', optionsValue: 'Minutes'">
            </select>
        </div>
        <div class="form-group">
            <label for="Service_HoursPerYearUnitFactor_UnitsReadonly">Units:</label>
            <input type="text" id="Service_HoursPerYearUnitFactor_UnitsReadonly" name="Service.HoursPerYearUnitFactor.UnitsReadonly" data-bind="value: UnitsReadonly, disable: true" class="digits textbox-small" />
            <span data-bind="text: UnitsFullDisplayText"></span>
        </div>
        <div class="form-group">
            <label class="submit-required" for="Service_Frequency">How many years:</label>
            <input class="digits textbox-small" data-bind="value: Frequency" id="Service_Frequency" name="Service.Frequency" type="text" value="0" />
            <span data-bind="text: FrequencyFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Frequency" data-valmsg-replace="true"></span>
        </div>
        <div class="form-group">
            <label class="submit-required" for="Service_Rate">Rate ($):</label>
            <input class="number textbox-small" data-bind="value: Rate, enable: CanEditRate" id="Service_Rate" name="Service.Rate" type="text" value="0" />
            <span data-bind="text: RateFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Rate" data-valmsg-replace="true"></span>
        </div>
    </fieldset>
</script>

<script id="Days Per Week Subtemplate" type="text/html">
    <fieldset class="fieldset-container-three">
        <legend>Specify weekly frequency:</legend>
        <div class="form-group">
            <label class="submit-required" for="Service_Units">Days per week:</label>
            <input class="digits textbox-small" data-bind="value: Units" id="Service_Units" name="Service.Units" type="text" value="0" />
            <span data-bind="text: UnitsFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Units" data-valmsg-replace="true"></span>
        </div>
        <div class="form-group">
            <label class="submit-required" for="Service_Frequency">How many weeks:</label>
            <input class="digits textbox-small" data-bind="value: Frequency" id="Service_Frequency" name="Service.Frequency" type="text" value="0" />
            <span data-bind="text: FrequencyFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Frequency" data-valmsg-replace="true"></span>
        </div>
        <div class="form-group">
            <label class="submit-required" for="Service_Rate">Rate ($):</label>
            <input class="number textbox-small" data-bind="value: Rate, enable: CanEditRate" id="Service_Rate" name="Service.Rate" type="text" value="0" />
            <span data-bind="text: RateFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Rate" data-valmsg-replace="true"></span>
        </div>
    </fieldset>
</script>

<script id="Days Per Month Subtemplate" type="text/html">
    <fieldset class="fieldset-container-three">
        <legend>Specify monthly frequency:</legend>
        <div class="form-group">
            <label class="submit-required" for="Service_Units">Days per month:</label>
            <input class="digits textbox-small" data-bind="value: Units" id="Service_Units" name="Service.Units" type="text" value="0" />
            <span data-bind="text: UnitsFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Units" data-valmsg-replace="true"></span>
        </div>
        <div class="form-group">
            <label class="submit-required" for="Service_Frequency">How many months:</label>
            <input class="digits textbox-small" data-bind="value: Frequency" id="Service_Frequency" name="Service.Frequency" type="text" value="0" />
            <span data-bind="text: FrequencyFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Frequency" data-valmsg-replace="true"></span>
        </div>
        <div class="form-group">
            <label class="submit-required" for="Service_Rate">Rate ($):</label>
            <input class="number textbox-small" data-bind="value: Rate, enable: CanEditRate" id="Service_Rate" name="Service.Rate" type="text" value="0" />
            <span data-bind="text: RateFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Rate" data-valmsg-replace="true"></span>
        </div>
    </fieldset>
</script>

<script id="Days Per Year Subtemplate" type="text/html">
    <fieldset class="fieldset-container-three">
        <legend>Specify annual frequency:</legend>
        <div class="form-group">
            <label class="submit-required" for="Service_Units">Days per year:</label>
            <input class="digits textbox-small" data-bind="value: Units" id="Service_Units" name="Service.Units" type="text" value="0" />
            <span data-bind="text: UnitsFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Units" data-valmsg-replace="true"></span>
        </div>
        <div class="form-group">
            <label class="submit-required" for="Service_Frequency">How many years:</label>
            <input class="digits textbox-small" data-bind="value: Frequency" id="Service_Frequency" name="Service.Frequency" type="text" value="0" />
            <span data-bind="text: FrequencyFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Frequency" data-valmsg-replace="true"></span>
        </div>
        <div class="form-group">
            <label class="submit-required" for="Service_Rate">Rate ($):</label>
            <input class="number textbox-small" data-bind="value: Rate, enable: CanEditRate" id="Service_Rate" name="Service.Rate" type="text" value="0" />
            <span data-bind="text: RateFullDisplayText"></span>
            <span class="field-validation-valid" data-valmsg-for="Service.Rate" data-valmsg-replace="true"></span>
        </div>
    </fieldset>
</script>

<script id="Other Weekly Subtemplate" type="text/html">
    <div class="form-group">
        <label class="submit-required" for="Service_Frequency">How many weeks:</label>
        <input class="digits textbox-small" data-bind="value: Frequency" id="Service_Frequency" name="Service.Frequency" type="text" value="0" />
        <span data-bind="text: FrequencyFullDisplayText"></span>
        <span class="field-validation-valid" data-valmsg-for="Service.Frequency" data-valmsg-replace="true"></span>
    </div>
</script>

<script id="Other Monthly Subtemplate" type="text/html">
    <div class="form-group">
        <label class="submit-required" for="Service_Frequency">How many months:</label>
        <input class="digits textbox-small" data-bind="value: Frequency" id="Service_Frequency" name="Service.Frequency" type="text" value="0" />
        <span data-bind="text: FrequencyFullDisplayText"></span>
        <span class="field-validation-valid" data-valmsg-for="Service.Frequency" data-valmsg-replace="true"></span>
    </div>
</script>

<script id="Other Annual Subtemplate" type="text/html">
    <div class="form-group">
        <label class="submit-required" for="Service_Frequency">How many years:</label>
        <input class="digits textbox-small" data-bind="value: Frequency" id="Service_Frequency" name="Service.Frequency" type="text" value="0" />
        <span data-bind="text: FrequencyFullDisplayText"></span>
        <span class="field-validation-valid" data-valmsg-for="Service.Frequency" data-valmsg-replace="true"></span>
    </div>
</script>

<script id="Empty" type="text/html">
    <span>Select a service to enter rate information.</span>
</script>

<script id="Unknown" type="text/html">
    <span>This service does not have a known UI type.</span>
</script>

<script id="Daily Chart" type="text/html">
    <div data-bind="with: WeeklyServiceHours">
        <div class="header-info">
            <span class="icon-info-sign" title="Additional info"></span>The daily chart will accept whole hours for each day of the week.
        </div>
        <div class="column-left">
            <div class="form-group">
                <label for="Sunday">Sunday:</label>
                <input id="Sunday" type="text" data-val-digits="Please enter only digits." data-val="true" class="digits textbox-small" data-bind="value: SundayHours, valueUpdate: 'afterkeydown', uniqueName: true" />
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
                <input id="SundayAlt" type="hidden" data-val="true" data-bind="valueWithAutoValidation: SundayHours, attr: { max: $parent.SelectedFrequencyData() ? $parent.SelectedFrequencyData().HoursPerDayMaximum : '' }, valueUpdate: 'afterkeydown', uniqueName: true" />
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
            </div>
            <div class="form-group">
                <label for="Monday">Monday:</label>
                <input id="Monday" type="text" data-val-digits="Please enter only digits." data-val="true" class="digits textbox-small" data-bind="value: MondayHours, valueUpdate: 'afterkeydown', uniqueName: true" />
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
                <input id="MondayAlt" type="hidden" data-val="true" data-bind="valueWithAutoValidation: MondayHours, attr: { max: $parent.SelectedFrequencyData() ? $parent.SelectedFrequencyData().HoursPerDayMaximum : '' }, valueUpdate: 'afterkeydown', uniqueName: true" />
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
            </div>
            <div class="form-group">
                <label for="Tuesday">Tuesday:</label>
                <input id="Tuesday" type="text" data-val-digits="Please enter only digits." data-val="true" class="digits textbox-small" data-bind="value: TuesdayHours, valueUpdate: 'afterkeydown', uniqueName: true" />
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
                <input id="TuesdayAlt" type="hidden" data-val="true" data-bind="valueWithAutoValidation: TuesdayHours, attr: { max: $parent.SelectedFrequencyData() ? $parent.SelectedFrequencyData().HoursPerDayMaximum : '' }, valueUpdate: 'afterkeydown', uniqueName: true" />
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
            </div>
            <div class="form-group">
                <label for="Wednesday">Wednesday:</label>
                <input id="Wednesday" type="text" data-val-digits="Please enter only digits." data-val="true" class="digits textbox-small" data-bind="value: WednesdayHours, valueUpdate: 'afterkeydown', uniqueName: true" />
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
                <input id="WednesdayAlt" type="hidden" data-val="true" data-bind="valueWithAutoValidation: WednesdayHours, attr: { max: $parent.SelectedFrequencyData() ? $parent.SelectedFrequencyData().HoursPerDayMaximum : '' }, valueUpdate: 'afterkeydown', uniqueName: true" />
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
            </div>
        </div>
        <div class="column-right">
            <div class="form-group">
                <label for="Thursday">Thursday:</label>
                <input id="Thursday" type="text" data-val-digits="Please enter only digits." data-val="true" class="digits textbox-small" data-bind="value: ThursdayHours, valueUpdate: 'afterkeydown', uniqueName: true" />
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
                <input id="ThursdayAlt" type="hidden" data-val="true" data-bind="valueWithAutoValidation: ThursdayHours, attr: { max: $parent.SelectedFrequencyData() ? $parent.SelectedFrequencyData().HoursPerDayMaximum : '' }, valueUpdate: 'afterkeydown', uniqueName: true" />
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
            </div>
            <div class="form-group">
                <label for="Friday">Friday:</label>
                <input id="Friday" type="text" data-val-digits="Please enter only digits." data-val="true" class="digits textbox-small" data-bind="value: FridayHours, valueUpdate: 'afterkeydown', uniqueName: true" />
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
                <input id="FridayAlt" type="hidden" data-val="true" data-bind="valueWithAutoValidation: FridayHours, attr: { max: $parent.SelectedFrequencyData() ? $parent.SelectedFrequencyData().HoursPerDayMaximum : '' }, valueUpdate: 'afterkeydown', uniqueName: true" />
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
            </div>
            <div class="form-group">
                <label for="Saturday">Saturday:</label>
                <input id="Saturday" type="text" data-val-digits="Please enter only digits." data-val="true" class="digits textbox-small" data-bind="value: SaturdayHours, valueUpdate: 'afterkeydown', uniqueName: true" />
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
                <input id="SaturdayAlt" type="hidden" data-val="true" data-bind="valueWithAutoValidation: SaturdayHours, attr: { max: $parent.SelectedFrequencyData() ? $parent.SelectedFrequencyData().HoursPerDayMaximum : '' }, valueUpdate: 'afterkeydown', uniqueName: true" />
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
            </div>
        </div>
        <hr />
    </div>
    <div class="form-group">
        <label class="submit-required" for="Service_Units_Daily">Hours per week:</label>
        <input type="text" id="Service_Units_Daily" name="Service.Units.Daily" data-bind="value: WeeklyServiceHours().TotalHoursPerWeek, disable: true" class="number textbox-small" />
        <span data-bind="text: UnitsFullDisplayText"></span>
    </div>
</script>

<script id="Daily Chart With Minutes" type="text/html">
    <div data-bind="with: WeeklyServiceHours">
        <div class="header-info">
            <span class="icon-info-sign" title="Additional info"></span>The daily chart will accept hours and minutes for each day of the week.
        </div>
        <div class="column-left">
            <div class="form-group">
                <span class="label-narform-group">Sunday:</span>
                <div class="auto-width">
                    <input id="SundayHours" type="text" data-val-digits="Please enter only digits." data-val="true" class="frequency digits textbox-small" data-bind="value: SundayHours.integer, valueUpdate: 'afterKeyDown', uniqueName: true" />
                    <label for="SundayHours" style="margin-right: 20px">Hours</label>
                    <select id="SundayMinutes" name="SundayMinutes" class="selector-small" data-bind="value: SundayHours.fraction, options: minuteIntervals, optionsText: 'Text', optionsValue: 'Minutes'"></select>
                    <label for="SundayMinutes">Minutes</label>
                </div>
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
                <input id="SundayHoursTotal" type="hidden" data-val="true" data-bind="valueWithAutoValidation: SundayHours, attr: { max: $parent.SelectedFrequencyData() ? $parent.SelectedFrequencyData().HoursPerDayMaximum : '' }, uniqueName: true" />
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
            </div>
            <div class="form-group">
                <span class="label-narform-group">Monday:</span>
                <div class="auto-width">
                    <input id="MondayHours" type="text" size="3" data-val-digits="Please enter only digits." data-val="true" class="frequency digits textbox-small" data-bind="value: MondayHours.integer, valueUpdate: 'afterKeyDown', uniqueName: true" />
                    <label for="MondayHours" style="margin-right: 20px">Hours</label>
                    <select id="MondayMinutes" name="MondayMinutes" class="selector-small" data-bind="value: MondayHours.fraction, options: minuteIntervals, optionsText: 'Text', optionsValue: 'Minutes'"></select>
                    <label for="MondayMinutes">Minutes</label>
                </div>
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
                <input id="MondayHoursTotal" type="hidden" data-val="true" data-bind="valueWithAutoValidation: MondayHours, attr: { max: $parent.SelectedFrequencyData() ? $parent.SelectedFrequencyData().HoursPerDayMaximum : '' }, uniqueName: true" />
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
            </div>
            <div class="form-group">
                <span class="label-narform-group">Tuesday:</span>
                <div class="auto-width">
                    <input id="TuesdayHours" type="text" size="3" data-val-digits="Please enter only digits." data-val="true" class="frequency digits textbox-small" data-bind="value: TuesdayHours.integer, valueUpdate: 'afterKeyDown', uniqueName: true" />
                    <label for="TuesdayHours" style="margin-right: 20px">Hours</label>
                    <select id="TuesdayMinutes" name="TuesdayMinutes" class="selector-small" data-bind="value: TuesdayHours.fraction, options: minuteIntervals, optionsText: 'Text', optionsValue: 'Minutes'"></select>
                    <label for="TuesdayMinutes">Minutes</label>
                </div>
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
                <input id="TuesdayHoursTotal" type="hidden" data-val="true" data-bind="valueWithAutoValidation: TuesdayHours, attr: { max: $parent.SelectedFrequencyData() ? $parent.SelectedFrequencyData().HoursPerDayMaximum : '' }, uniqueName: true" />
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
            </div>
            <div class="form-group">
                <span class="label-narform-group">Wednesday:</span>
                <div class="auto-width">
                    <input id="WednesdayHours" type="text" size="3" data-val-digits="Please enter only digits." data-val="true" class="frequency digits textbox-small" data-bind="value: WednesdayHours.integer, valueUpdate: 'afterKeyDown', uniqueName: true" />
                    <label for="WednesdayHours" style="margin-right: 20px">Hours</label>
                    <select id="WednesdayMinutes" name="WednesdayMinutes" class="selector-small" data-bind="value: WednesdayHours.fraction, options: minuteIntervals, optionsText: 'Text', optionsValue: 'Minutes'"></select>
                    <label for="WednesdayMinutes">Minutes</label>

                </div>
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
                <input id="WednesdayHoursTotal" type="hidden" data-val="true" data-bind="valueWithAutoValidation: WednesdayHours, attr: { max: $parent.SelectedFrequencyData() ? $parent.SelectedFrequencyData().HoursPerDayMaximum : '' }, uniqueName: true" />
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
            </div>
        </div>
        <div class="column-right">
            <div class="form-group">
                <span class="label-narform-group">Thursday:</span>
                <div class="auto-width">
                    <input id="ThursdayHours" type="text" size="3" data-val-digits="Please enter only digits." data-val="true" class="frequency digits textbox-small" data-bind="value: ThursdayHours.integer, valueUpdate: 'afterKeyDown', uniqueName: true" />
                    <label for="ThursdayHours" style="margin-right: 20px">Hours</label>
                    <select id="ThursdayMinutes" name="ThursdayMinutes" class="selector-small"data-bind="value: ThursdayHours.fraction, options: minuteIntervals, optionsText: 'Text', optionsValue: 'Minutes'"></select>
                    <label for="ThursdayMinutes">Minutes</label>

                </div>
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
                <input id="ThursdayHoursTotal" type="hidden" data-val="true" data-bind="valueWithAutoValidation: ThursdayHours, attr: { max: $parent.SelectedFrequencyData() ? $parent.SelectedFrequencyData().HoursPerDayMaximum : '' }, uniqueName: true" />
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
            </div>
            <div class="form-group">
                <span class="label-narform-group">Friday:</span>
                <div class="auto-width">
                    <input id="FridayHours" type="text" size="3" data-val-digits="Please enter only digits." data-val="true" class="frequency digits textbox-small" data-bind="value: FridayHours.integer, valueUpdate: 'afterKeyDown', uniqueName: true" />
                    <label for="FridayHours" style="margin-right: 20px">Hours</label>
                    <select id="FridayMinutes" name="FridayMinutes" class="selector-small" data-bind="value: FridayHours.fraction, options: minuteIntervals, optionsText: 'Text', optionsValue: 'Minutes'">
                    </select>
                    <label for="FridayMinutes">Minutes</label>

                </div>
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
                <input id="FridayHoursTotal" type="hidden" data-val="true" data-bind="valueWithAutoValidation: FridayHours, attr: { max: $parent.SelectedFrequencyData() ? $parent.SelectedFrequencyData().HoursPerDayMaximum : '' }, uniqueName: true" />
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
            </div>
            <div class="form-group">
                <span class="label-narform-group">Saturday:</span>
                <div class="auto-width">
                    <input id="SaturdayHours" type="text"size="3"  data-val-digits="Please enter only digits." data-val="true" class="frequency digits textbox-small" data-bind="value: SaturdayHours.integer, valueUpdate: 'afterKeyDown',uniqueName: true" />
                    <label for="SaturdayHours" style="margin-right: 20px">Hours</label>
                    <select id="SaturdayMinutes" name="SaturdayMinutes" class="selector-small" data-bind="value: SaturdayHours.fraction, options: minuteIntervals, optionsText: 'Text', optionsValue: 'Minutes'"></select>
                    <label for="SaturdayMinutes">Minutes</label>

                </div>
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
                <input id="SaturdayHoursTotal" type="hidden" data-val="true" data-bind="valueWithAutoValidation: SaturdayHours, attr: { max: $parent.SelectedFrequencyData() ? $parent.SelectedFrequencyData().HoursPerDayMaximum : '' }, uniqueName: true" />
                <span class="field-validation-valid" data-bind="valmsg: true" data-valmsg-replace="true"></span>
            </div>
        </div>
        <hr />
    </div>
    <div class="form-group">
        <label class="submit-required" for="Service_TotalHoursPerWeek">Hours per week:</label>
        <input type="text" id="Service_TotalHoursPerWeek" name="Service.TotalHoursPerWeek" data-bind="value: WeeklyServiceHours().TotalHoursPerWeek, disable: true" class="number textbox-small" />
        <span data-bind="text: PreCalculatedUnitsDisplayText"></span>
    </div>
</script>

<script type="text/javascript">

var emergencyBackupsList = [];

function ServiceDataListItem(text, value, group) {
    this.Text = text;
    this.Value = value;
    this.Group = group;
}

function buildServiceDataGroups(serviceDataItems) {
    return ko.utils.arrayMap(serviceDataItems, function(dataItem) {
        return new ServiceDataListItem(dataItem.ServiceName, dataItem.ServiceDataId, dataItem.Group);
    });
}

function PlanOfServiceType(data) {
    var self = this;
    data = data || {};
    //self.Value = ko.observable(data.Value);
    self.Name = ko.observable(data.Name);
}

function PlanServiceRevisionStatus(data) {
    var self = this;
    data = data || {};
    self.Name = data.Name;
}

function FrequencyType(data) {
    var self = this;
    data = data || {};
    //self.Value = ko.observable(data.Value);
    self.Name = ko.observable(data.Name);
    self.DisplayName = ko.computed(function() {
        if (self.Name() == 'NotApplicable') {
            return "One-Time Purchase";
        } else {
            return self.Name();
        }
    });
}

function UnitType(data) {
    var self = this;
    data = data || {};
    //self.Value = ko.observable(data.Value);
    self.Name = ko.observable(data.Name);
}

function UserInterfaceType(data) {
    var self = this;
    data = data || {};
    self.Name = ko.observable(data.Name);
}

function FrequencyData(data) {
    var self = this;
    data = data || {};

    self.RatePrecision = ko.observable(data.RatePrecision);
    self.RateDefault = ko.observable(data.RateDefault).extend({ numeric: data.RatePrecision });
    self.MaximumRate = ko.observable(data.MaximumRate).extend({ numeric: data.RatePrecision });
    self.MinimumRate = ko.observable(data.MinimumRate).extend({ numeric: data.RatePrecision });
    self.UnitDefault = ko.observable(data.UnitDefault);
    self.MaximumUnit = ko.observable(data.MaximumUnit);
    self.FrequencyDefault = ko.observable(data.FrequencyDefault);
    self.MaximumFrequency = ko.observable(data.MaximumFrequency);
    self.FrequencyType = ko.observable(new FrequencyType(data.FrequencyType));
    self.CalculationType = ko.observable(data.CalculationType);
    self.RateDisplayText = ko.observable(data.RateDisplayText);
    self.UnitDisplayText = ko.observable(data.UnitDisplayText);
    self.FrequencyDisplayText = ko.observable(data.FrequencyDisplayText);
    self.Comments = ko.observable(data.Comments);
    self.Id = ko.observable(data.Id);
    self.PreCalculatedUnitsMaximum = data.PreCalculatedUnitsMaximum;
    self.HoursPerDayMaximum = data.HoursPerDayMaximum;
    self.DaysPerWeekMaximum = data.DaysPerWeekMaximum;
    self.OtherHoursMaximum = data.OtherHoursMaximum;
    self.OtherItemsMaximum = data.OtherItemsMaximum;
    self.OtherDaysMaximum = data.OtherDaysMaximum;
    self.DefaultUnitType = new UnitType(data.DefaultUnitType);
}

function WeeklyServiceHours(weeklyServiceHoursDto) {
    var self = this;
    weeklyServiceHoursDto = weeklyServiceHoursDto || {};
    self.SundayHours = ko.observable(weeklyServiceHoursDto.SundayHours || 0).extend({ splitFloat: null });
    self.MondayHours = ko.observable(weeklyServiceHoursDto.MondayHours || 0).extend({ splitFloat: null });
    self.TuesdayHours = ko.observable(weeklyServiceHoursDto.TuesdayHours || 0).extend({ splitFloat: null });
    self.WednesdayHours = ko.observable(weeklyServiceHoursDto.WednesdayHours || 0).extend({ splitFloat: null });
    self.ThursdayHours = ko.observable(weeklyServiceHoursDto.ThursdayHours || 0).extend({ splitFloat: null });
    self.FridayHours = ko.observable(weeklyServiceHoursDto.FridayHours || 0).extend({ splitFloat: null });
    self.SaturdayHours = ko.observable(weeklyServiceHoursDto.SaturdayHours || 0).extend({ splitFloat: null });

    self.TotalHoursPerWeek = ko.computed(function() {
        var total = 0;
        total += isNaN(parseFloat(self.SundayHours())) ? 0 : parseFloat(self.SundayHours());
        total += isNaN(parseFloat(self.MondayHours()))? 0 : parseFloat(self.MondayHours());
        total += isNaN(parseFloat(self.TuesdayHours()))? 0 : parseFloat(self.TuesdayHours());
        total += isNaN(parseFloat(self.WednesdayHours()))? 0 : parseFloat(self.WednesdayHours());
        total += isNaN(parseFloat(self.ThursdayHours()))? 0 : parseFloat(self.ThursdayHours());
        total += isNaN(parseFloat(self.FridayHours()))? 0 : parseFloat(self.FridayHours());
        total += isNaN(parseFloat(self.SaturdayHours()))? 0 : parseFloat(self.SaturdayHours());
        return total;
    });
}

function SharingClient(id, identifier, name) {
    var self = this;

    self.ClientId = ko.observable(id);
    self.ClientIdentifier = ko.observable(identifier);
    self.ClientName = ko.observable(name);
    self.ProfileLink = ko.computed(function() {
        return '/ltss/WebSites/MDHotFixQC/Ltss.Web/CasePrograms/CaseProgram/ClientSummary/' + "?clientId=" + self.ClientId();
    });
}

function PlanOfServiceService(posService) {
    var self = this;
    posService = posService || {};

    // IsBeingEdited only applies to existing services being edited, not new ones being created
    self.IsBeingEdited = ko.observable(false);
    self.InQuickView = ko.observable(false);
    self.SharingClient = ko.observable(posService.SharingClient ? new SharingClient(posService.SharingClient.ClientId, posService.SharingClient.ClientIdentifier, posService.SharingClient.ClientName) : new SharingClient());
    self.CanEmergencyBackupBill = ko.observable(posService.CanEmergencyBackupBill);
    self.CanEditRate = ko.observable(posService.CanEditRate);
    self.IsSharedAttendantCare = ko.observable(posService.IsSharedAttendantCare);
    self.IsTransitionService = ko.observable(posService.IsTransitionService);
    self.TransitionServiceTypeId = ko.observable(posService.TransitionServiceTypeId);
    self.TransitionServiceType = ko.observable(posService.TransitionServiceType);
    self.TransitionServiceTypeSpecifyOther = ko.observable(posService.TransitionServiceTypeSpecifyOther);
    self.IsTransitionServiceTypeOther = ko.computed(function() {
        return (self.TransitionServiceTypeId() === "transitionservicereasons/-7");
    });
    self.IsNurseMonitoring = ko.observable(posService.IsNurseMonitoring);
    self.NOfDaysNurseMonitoringWillBePerformed = ko.observable(posService.NOfDaysNurseMonitoringWillBePerformed);
    self.IsMfpFlexibleFunds = ko.observable(posService.IsMfpFlexibleFunds);
    self.MfpFlexibleFundsServiceTypeId = ko.observable(posService.MfpFlexibleFundsServiceTypeId);

    self.ParentPlanService = posService.ParentPlanService ? new PlanOfServiceService(posService.ParentPlanService) : {};
    self.HasParentPlanService = !!posService.ParentPlanService;
    self.PlanServiceRevisionStatus = ko.observable(new PlanServiceRevisionStatus(posService.PlanServiceRevisionStatus));

    self.ServiceId = ko.observable(posService.ServiceId); // PlanService's Id
    self.ServiceDataId = ko.observable(posService.ServiceDataId);
    self.ServiceName = ko.observable(posService.ServiceName);
    self.PlanOfServiceType = ko.observable(new PlanOfServiceType(posService.PlanOfServiceType));

    self.ProviderFacilityLocationId = ko.observable(posService.ProviderFacilityLocationId);
    self.ProviderLocationName = ko.observable(posService.ProviderLocationName);
    self.ProviderLocationNumber = ko.observable(posService.ProviderLocationNumber);
    self.ProviderLocationTypeName = ko.observable(posService.ProviderLocationTypeName);
    self.ProviderRequiredForSubmit = ko.computed(function() {
        if (self.PlanOfServiceType()) {
            return !(self.PlanOfServiceType().Name() === 'State Plan Service' || self.PlanOfServiceType().Name() === 'Community Service')
                && true;
        }
        return false;
    });

    self.UseFiProvider = ko.computed(function() {
        return self.IsTransitionService() || self.IsMfpFlexibleFunds();
    });

    self.UserInterfaceType = ko.observable(new UserInterfaceType(posService.UserInterfaceType));
    self.TemplateToUse = ko.computed(function() {
        if (self.UserInterfaceType() && self.UserInterfaceType().Name()) {
            return self.UserInterfaceType().Name();
        } else if (self.ServiceName()) {
            // when dropdown is not blank but no recognizable UI type was returned
            return "Unknown";
        } else {
            // when dropdown is blank
            return "";
        }
    });

    self.FrequencyDataList = ko.observableArray(ko.utils.arrayMap(posService.FrequencyDataList, function(freqData) {
        return new FrequencyData(freqData);
    }));

    self.FrequencyType = ko.observable(new FrequencyType(posService.FrequencyType));
    self.SelectedFrequencyData = ko.computed(function() {
        if (self.FrequencyType().Name()) {
            return ko.utils.arrayFirst(self.FrequencyDataList(), function(item) {
                return item.FrequencyType().Name() == self.FrequencyType().Name();
            });
        } else {
            return undefined;
        }
    });

    self.RandomTimePeriodTemplate = ko.computed(function() {
        if (self.SelectedFrequencyData()) {
            var freqType = self.SelectedFrequencyData().FrequencyType().Name();

            if (freqType === 'Daily') {
                return "Hours Per Day Subtemplate";
            } else if (freqType === 'Weekly') {
                return "Hours Per Week Subtemplate";
            } else if (freqType === 'Monthly') {
                return "Hours Per Month Subtemplate";
            } else if (freqType === 'Annual') {
                return "Hours Per Year Subtemplate";
            } else {
                return "Unknown";
            }
        } else {
            return "Unknown";
        }
    });

    self.RandomTimePeriodUnitFactorTemplate = ko.computed(function() {
        if (self.SelectedFrequencyData()) {
            var freqType = self.SelectedFrequencyData().FrequencyType().Name();

            if (freqType === 'Daily') {
                return "Hours Per Day Unit Factor Subtemplate";
            } else if (freqType === 'Weekly') {
                return "Hours Per Week Unit Factor Subtemplate";
            } else if (freqType === 'Monthly') {
                return "Hours Per Month Unit Factor Subtemplate";
            } else if (freqType === 'Annual') {
                return "Hours Per Year Unit Factor Subtemplate";
            } else {
                return "Unknown";
            }
        } else {
            return "Unknown";
        }
    });

    self.DayUnitsPerYearTemplate = ko.computed(function() {
        if (self.SelectedFrequencyData()) {
            var freqType = self.SelectedFrequencyData().FrequencyType().Name();

            if (freqType === 'Weekly') {
                return "Days Per Week Subtemplate";
            } else if (freqType === 'Monthly') {
                return "Days Per Month Subtemplate";
            } else if (freqType === 'Annual') {
                return "Days Per Year Subtemplate";
            } else {
                return "Unknown";
            }
        } else {
            return "Unknown";
        }
    });

    self.OtherTemplate = ko.computed(function() {
        if (self.SelectedFrequencyData()) {
            var freqType = self.SelectedFrequencyData().FrequencyType().Name();

            if (freqType === 'Weekly') {
                return "Other Weekly Subtemplate";
            } else if (freqType === 'Monthly') {
                return "Other Monthly Subtemplate";
            } else if (freqType === 'Annual') {
                return "Other Annual Subtemplate";
            } else {
                return "Unknown";
            }
        } else {
            return "Unknown";
        }
    });

    self.DynamicRatePrecision = function() {
        if (self.SelectedFrequencyData()) {
            return self.SelectedFrequencyData().RatePrecision();
        } else {
            return 2;
        }
    };

    self.Rate = ko.observable(posService.Rate).extend({ numeric: self.DynamicRatePrecision });
    self.RateFullDisplayText = ko.computed(function() {
        if (self.SelectedFrequencyData()) {
            var text = "";
            if (self.SelectedFrequencyData().RateDisplayText()) {
                text += self.SelectedFrequencyData().RateDisplayText() + " ";
            }
            text += "(";
            if (self.SelectedFrequencyData().MinimumRate() != 0) {
                text += "min value is $" + self.SelectedFrequencyData().MinimumRate() + ", ";
            }
            text += "max value is $" + self.SelectedFrequencyData().MaximumRate() + ")";
            if (self.SelectedFrequencyData().Comments()) {
                text += " - " + self.SelectedFrequencyData().Comments();
            }
            return text;
        } else {
            return "";
        }
    });
    self.Units = ko.observable(posService.Units);
    self.UnitsFullDisplayText = ko.computed(function() {
        if (self.SelectedFrequencyData()) {
            var text = "";
            if (self.SelectedFrequencyData().UnitDisplayText()) {
                text += self.SelectedFrequencyData().UnitDisplayText() + " ";
            }
            text += "(max value is " + self.SelectedFrequencyData().MaximumUnit() + ")";
            return text;
        } else {
            return "";
        }
    });
    self.UnitsTableText = posService.UnitsTableText;
    self.Frequency = ko.observable(posService.Frequency);
    self.FrequencyFullDisplayText = ko.computed(function() {
        if (self.SelectedFrequencyData()) {
            var text = "";
            if (self.SelectedFrequencyData().FrequencyDisplayText()) {
                text += self.SelectedFrequencyData().FrequencyDisplayText() + " ";
            }
            text += "(max value is " + self.SelectedFrequencyData().MaximumFrequency() + ")";
            return text;
        } else {
            return "";
        }
    });
    self.FrequencyTableText = posService.FrequencyTableText;

    self.PreCalculatedUnitsDisplayText = ko.computed(function() {
        if (self.SelectedFrequencyData() && self.SelectedFrequencyData().PreCalculatedUnitsMaximum) {
            return "(max value is " + self.SelectedFrequencyData().PreCalculatedUnitsMaximum + ")";
        } else {
            return "";
        }
    });

    self.HoursPerDayDisplayText = ko.computed(function() {
        if (self.SelectedFrequencyData() && self.SelectedFrequencyData().HoursPerDayMaximum) {
            return "(max value is " + self.SelectedFrequencyData().HoursPerDayMaximum + ")";
        } else {
            return "";
        }
    });

    self.DaysPerWeekDisplayText = ko.computed(function() {
        if (self.SelectedFrequencyData() && self.SelectedFrequencyData().DaysPerWeekMaximum) {
            return "(max value is " + self.SelectedFrequencyData().DaysPerWeekMaximum + ")";
        } else {
            return "";
        }
    });

    self.ServiceReasonDescription = ko.observable(posService.ServiceReasonDescription);
    self.CalculationType = ko.observable(posService.CalculationType);
    self.CalculateUnitsBasedOn = ko.observable(ConvertCalculateUnitsBasedOn(posService.CalculateUnitsBasedOn));

    self.UseDailyChart = ko.observable(posService.CalculateUnitsBasedOn
        ? posService.CalculateUnitsBasedOn === 2 || posService.CalculateUnitsBasedOn === 'HoursPerWeekSpecifiedBySpecificDay'
        : false);
    self.UseDailyChart.subscribe(function(val) {
        self.ShouldCalculateTotals(false);
        self.resetCalculationInputs(true, false);
        self.setDefaultCalculationInputs(true);

        self.SetCalculateUnitsBasedOn();

        self.ShouldCalculateTotals(true);
    });

    self.WeeklyServiceHours = ko.observable(new WeeklyServiceHours(posService.WeeklyServiceHours));

    // optional service-specific properties:
    // hours per day items
    self.UnitsHoursPerDay = ko.observable(posService.UnitsHoursPerDay).extend({ splitFloat: null });
    self.UnitsDaysPerWeek = ko.observable(posService.UnitsDaysPerWeek);
    // update on self.Totals() computed evaluation so it won't update if the form isn't valid
    self.HoursPerWeek = ko.observable(self.UnitsHoursPerDay() * self.UnitsDaysPerWeek());

    // per month items
    self.UnitsFactor = ko.observable(posService.UnitsFactor);
    self.PreCalculatedUnits = ko.observable(posService.PreCalculatedUnits).extend({ splitFloat: null });

    // used to display the calculated, read-only units value when 'units'
    // is actually derived from a combination of other variables
    self.UnitsReadonly = ko.observable(posService.Units);

    // multiple purchase items, one-time purchase, other
    self.ItemDescription = ko.observable(posService.ItemDescription);
    // other
    self.UnitType = ko.observable(new UnitType(posService.UnitType));

    self.OtherServiceUnitsFullDisplayText = ko.computed(function() {
        if (self.SelectedFrequencyData()) {
            var text = "";
            if (self.SelectedFrequencyData().UnitDisplayText()) {
                text += self.SelectedFrequencyData().UnitDisplayText() + " ";
            }
            var maxUnits;

            if (self.UnitType() && self.UnitType().Name()) {
                if (self.UnitType().Name() == 'Hours') {
                    maxUnits = self.SelectedFrequencyData().OtherHoursMaximum;
                } else if (self.UnitType().Name() == 'Items') {
                    maxUnits = self.SelectedFrequencyData().OtherItemsMaximum;
                } else if (self.UnitType().Name() == 'Days') {
                    maxUnits = self.SelectedFrequencyData().OtherDaysMaximum;
                } else {
                    maxUnits = "UNKNOWN";
                }
            } else {
                maxUnits = self.SelectedFrequencyData().MaximumUnit();
            }
            text += "(max value is " + maxUnits + ")";
            return text;
        } else {
            return "";
        }
    });

    self.MonthlyTotal = ko.observable(posService.MonthlyTotal).extend({ numeric: 2 });
    self.AnnualTotal = ko.observable(posService.AnnualTotal).extend({ numeric: 2 });

    self.ShouldCalculateTotals = ko.observable(false);

    self.MfpFlexibleFundsServiceTypeId.subscribe(function() {
        if (self.MfpFlexibleFundsServiceTypeId()) {
            self.setDefaultCalculationInputs();
        }
    });

    self.Totals = ko.computed({
        read: function() {
            if (self.ShouldCalculateTotals()) {
                $.ajax({
                    url: '/ltss/WebSites/MDHotFixQC/Ltss.Web/Cfc/PlanOfServiceService/UpdatePlanOfServiceDataTotals/',
                    data: ko.toJSON({
                        planOfServiceData:
                        {
                            CalculationType: self.CalculationType(),
                            Rate: self.Rate(),
                            Units: self.Units(),
                            Frequency: self.Frequency(),
                            CalculateUnitsBasedOn: self.CalculateUnitsBasedOn(),
                            WeeklyServiceHours: self.WeeklyServiceHours(),
                            UnitsHoursPerDay: self.UnitsHoursPerDay(),
                            UnitsDaysPerWeek: self.UnitsDaysPerWeek(),
                            UnitsFactor: self.UnitsFactor(),
                            PreCalculatedUnits: self.PreCalculatedUnits()
                        }
                    }),
                    type: 'post',
                    contentType: 'application/json',
                    success: function(data, textStatus, jqxhr) {

                        var formValid = !$("#calculationInputs").find(":text").hasClass("input-validation-error");
                        if (formValid) {
                            if (data.Success) {
                                self.AnnualTotal(data.AnnualTotal);
                                self.UnitsReadonly(data.Units);
                                self.HoursPerWeek(self.UnitsHoursPerDay() * self.UnitsDaysPerWeek());
                            } else {
                                HandleAjaxResult(data.AjaxResult);
                            }
                        }

                    }
                });
            }
        }
    }).extend({ throttle: 60 });

    self.setInitialServiceDefinitionInfo = function(serviceData) {
        self.ShouldCalculateTotals(false);
        self.UseDailyChart(false);
        self.PlanOfServiceType(new PlanOfServiceType(serviceData.PlanOfServiceType));
        self.ServiceName(serviceData.ServiceName);
        self.CalculationType(serviceData.CalculationType);
        self.CanEditRate(serviceData.CanEditRate);
        self.IsSharedAttendantCare(serviceData.IsSharedAttendantCare);
        self.IsMfpFlexibleFunds(serviceData.IsMfpFlexibleFunds);
        // if the previously selected service uses an FI provider and the next one does not,
        // clear out FI provider info that other services should not have
        if (self.UseFiProvider() && (!serviceData.IsTransitionService || !serviceData.IsMfpFlexibleFunds)) {
            self.clearProviderInfo();
        }
        self.IsTransitionService(serviceData.IsTransitionService);
        self.CanEmergencyBackupBill(serviceData.CanEmergencyBackupBill);
        self.IsNurseMonitoring(serviceData.IsNurseMonitoring);
        if (serviceData.UserInterfaceType) {
            self.UserInterfaceType(new UserInterfaceType(serviceData.UserInterfaceType));
        } else {
            self.UserInterfaceType(new UserInterfaceType());
        }
        self.UnitsFactor(serviceData.UnitsFactor);
        self.ItemDescription(serviceData.ItemDescription);
        self.WeeklyServiceHours(new WeeklyServiceHours());

        self.SetCalculateUnitsBasedOn();

        self.FrequencyDataList(ko.utils.arrayMap(serviceData.FrequencyDataList, function(freqData) {
            return new FrequencyData(freqData);
        }));
        self.FrequencyType(new FrequencyType(serviceData.FrequencyType)); // default frequency type

        self.ProviderFacilityLocationId(serviceData.ProviderFacilityLocationId);
        self.ProviderLocationName(serviceData.ProviderLocationName);
        self.ProviderLocationNumber(serviceData.ProviderLocationNumber);
        self.ProviderLocationTypeName(serviceData.ProviderLocationTypeName);

        self.ShouldCalculateTotals(true);
    };

    self.ServiceDataId.subscribe(function(serviceDataId) {
        if (!self.InQuickView()) {
            if (serviceDataId) {
                closeMessage();
                activateBlockUi();
                var serviceDataUrl = '/ltss/WebSites/MDHotFixQC/Ltss.Web/Cfc/PlanOfServiceService/GetPlanOfCareServiceData/';
                $.ajax({
                    url: serviceDataUrl,
                    data: ko.toJSON({ serviceDataId: serviceDataId, id: '' }),
                    type: 'post',
                    contentType: 'application/json',
                    success: function(result, textStatus, jqxhr) {
                        if (result.ServiceData) {
                            self.setInitialServiceDefinitionInfo(result.ServiceData);
                        } else {
                            HandleAjaxResult(result.AjaxResult);
                            self.resetCompletely();
                        }
                    },
                    error: function(jqXHR, textStatus, errorThform-groupn) {
                    showMessage("There was a problem retrieving service data.");
                    self.resetCompletely();
                }
            });
        } else {
            var shouldCalc = self.ShouldCalculateTotals();
            self.ShouldCalculateTotals(false);
            self.resetCompletely();
            self.ShouldCalculateTotals(shouldCalc);
        }
    }
});

self.SelectedFrequencyData.subscribe(function() {
    self.ShouldCalculateTotals(false);
    self.resetCalculationInputs();
    if (self.SelectedFrequencyData()) {
        self.setDefaultCalculationInputs();
        self.SetCalculateUnitsBasedOn();
        self.UnitType(new UnitType(ko.toJS(self.SelectedFrequencyData().DefaultUnitType)));
    }
    self.ShouldCalculateTotals(true);
});

// this is for when the saved frequency isn't in the frequency list, which happens when
// editing a service from one service definition year that has a frequency not in the current
// service definition year
self.ResolveFrequencies = function() {
    if (self.FrequencyType().Name()) {
        var matchingFrequency = ko.utils.arrayFirst(self.FrequencyDataList(), function(item) {
            return item.FrequencyType().Name() == self.FrequencyType().Name();
        });

        if (!matchingFrequency && self.FrequencyDataList() && self.FrequencyDataList().length > 0) {
            var freqJsObj = ko.toJS(self.FrequencyDataList()[0].FrequencyType());
            self.FrequencyType(new FrequencyType(freqJsObj));
        }
    }
}

self.SetCalculateUnitsBasedOn = function() {
    if (self.UseDailyChart()) {
        self.CalculateUnitsBasedOn('HoursPerWeekSpecifiedBySpecificDay');
    } else {
        if (self.UserInterfaceType().Name() === "Hours Per Day" ||
            self.RandomTimePeriodTemplate() === "Hours Per Day Subtemplate" ||
            self.RandomTimePeriodUnitFactorTemplate() === "Hours Per Day Unit Factor Subtemplate") {
            self.CalculateUnitsBasedOn('HoursPerDayAndNumberOfDaysPerWeek');
        } else {
            self.CalculateUnitsBasedOn('UnitsDoNotNeedToBePreCalculated');
        }
    }
};

self.setDefaultCalculationInputs = function(resetDefaultFreq) {
    self.Rate(self.SelectedFrequencyData().RateDefault());
    self.Units(self.SelectedFrequencyData().UnitDefault());
    if (!resetDefaultFreq) {
        self.Frequency(self.SelectedFrequencyData().FrequencyDefault());
    }
};

self.resetCalculationInputs = function(resetFreq, resetDailyChart) {
    resetDailyChart = typeof(resetDailyChart) !== 'undefined' ? resetDailyChart : true;

    self.Rate(null);
    self.Units(null);
    if (!resetFreq) {
        self.Frequency(null);
    }
    if (resetDailyChart) {
        self.UseDailyChart(false);
    }
    self.ItemDescription(null);
    self.SetCalculateUnitsBasedOn();
    self.WeeklyServiceHours(new WeeklyServiceHours());
    self.UnitsHoursPerDay(0);
    self.UnitsDaysPerWeek(0);
    self.PreCalculatedUnits(null);
    self.UnitsReadonly(null);
    self.UnitType(new UnitType());
};

self.resetCompletely = function() {
    self.ServiceName(null);
    self.PlanOfServiceType(new PlanOfServiceType());
    self.UserInterfaceType(new UserInterfaceType());
    self.FrequencyType(new FrequencyType());
    self.FrequencyDataList.removeAll();
    self.IsSharedAttendantCare(false);
    self.IsTransitionService(false);
    self.CanEmergencyBackupBill(false);
    self.IsNurseMonitoring(false);
    self.IsMfpFlexibleFunds(false);

    self.resetCalculationInputs();
};

self.canClearProvider = ko.computed(function() {
    return self.ProviderFacilityLocationId() && !(self.ProviderRequiredForSubmit());
});

self.clearProviderInfo = function() {
    self.ProviderFacilityLocationId("");
    self.ProviderLocationName("");
    self.ProviderLocationNumber("");
    self.ProviderLocationTypeName("");
};

self.canClearSharingClient = ko.computed(function() {
    return self.SharingClient() && self.SharingClient().ClientIdentifier;
});

self.clearSharingClient = function() {
    self.SharingClient().ClientId("");
    self.SharingClient().ClientIdentifier("");
    self.SharingClient().ClientName("");
};

self.forceValidate = function(element) {
    $(element).find(".re-validate").each(function() {
        $(this).valid();
    });
};
}

function ConvertCalculateUnitsBasedOn(val) {
    // when deep copying, it's already a string
    if (typeof(val) === "string") {
        return val;
    }
    // when coming from the server, the enum is a number
    switch (val) {
        case 0:
            return 'UnitsDoNotNeedToBePreCalculated';
        case 1:
            return 'HoursPerDayAndNumberOfDaysPerWeek';
        case 2:
            return 'HoursPerWeekSpecifiedBySpecificDay';
        default:
            return 'UnitsDoNotNeedToBePreCalculated';
    }
}

function MinuteInterval(text, minutes) {
    this.Text = text;
    this.Minutes = minutes;
}

var minuteIntervals = [
    new MinuteInterval("0", 0.00),
    new MinuteInterval("15", 0.25),
    new MinuteInterval("30", 0.50),
    new MinuteInterval("45", 0.75)
];

function convertCompleteReqToSubmitReq(elements) {
    $(elements).find(".complete-required").each(function() {
        var $el = $(this);

        if ($el.hasClass("complete-required")) {
            $el.removeClass("complete-required");
            $el.addClass("submit-required");

            $el.children('span.complete-required-indicator').remove();
            $el.children('span.complete-required-title').remove();

            $el.submitRequired();
        }
    });
}

function replaceSelectsWithTextboxes(elements, skipSomeInputsForProvisionalAppoved) {
    var $selectsToReplace = $(elements).find("select");
    if (skipSomeInputsForProvisionalAppoved) {
        $selectsToReplace = skipElementsToDisable($selectsToReplace);
    }
    $selectsToReplace.each(function() {

        var $oldSelect = $(this);
        var $input = $(document.createElement('input'));

        $input.attr('id', $oldSelect.attr('id'));
        $input.attr('type', 'text');
        $input.attr('name', $oldSelect.attr('name'));
        $input.attr('value', $oldSelect.find("option:selected").text());
        $input.attr('readonly', 'readonly');
        $input.attr('class', 'readonly');

        if ($oldSelect.hasClass('required')) {
            $input.addClass('required');
        }

        var $selectParent = $oldSelect.parent();
        $oldSelect.remove();
        $selectParent.append($input);
        dynamicTextboxWidth($input);
    });

    $(elements).find("[id*='Other_Type']").addClass('textbox-small');
    $(elements).find("[id*='Minutes']").addClass('textbox-small');
    $(elements).find("[id*='Fraction']").addClass('textbox-small');
}

function skipElementsToDisable($elements) {
    return $elements
        .not("#fakeOpenServiceProviderSearchButton")
        .not("#clientSearchButton")
        .not("#clearServiceProviderButton")
        .not("#ProviderFacilityName")
        .not("#fi_ProviderFacilityName")
        .not("#Service_TransitionServiceOther")
        .not("#Service_TransitionServiceId")
        .not("#Service_NoOfNurseMonitoringDays")
        .not("#Service_MfpFlexibleFundsServiceTypeId");
}

function makeTemplateReadonly(elements) {
    var $elements = $(elements);
    $elements.find(":input").attr("readonly", "readonly").removeClass('required');
    $elements.find(":checkbox").attr("disabled", true);
    $elements.find(":radio").attr("disabled", true);

    $elements.find("[id*='fakeOpenServiceProviderSearchButton']").hide();
    $elements.find("[id*='clearServiceProviderButton']").hide();
    $elements.find("[id*='clientSearchButton']").hide();
    $elements.find("[id*='clearClientSearchButton']").hide();
    $elements.find("[id*='ServiceName']").each(function() {
        var $nameTextBox = $(this);
        if ($nameTextBox.is('input:text')) {
            dynamicTextboxWidth($nameTextBox);
        }
    });
}

ko.bindingHandlers.updateCompleteRequired = {
    update: function(element) {
        $(element).completeRequired();
    }
};

ko.bindingHandlers.updateSubmitRequired = {
    update: function(element) {
        $(element).submitRequired();
    }
};

ko.extenders.numeric = function(target, precision) {
    var result = ko.computed({
        read: target,
        write: function(newValue) {
            var current = target();

            if (typeof(newValue) === 'string') {
                newValue = newValue.replace(/[^\d.-]/g, '');
            }

            var precisionValue;

            if (typeof(precision) == "function") {
                precisionValue = precision();
            } else {
                precisionValue = precision;
            }

            var valueToWrite;
            if (isNaN(newValue)) {
                valueToWrite = newValue;
            } else if (newValue == null || !newValue || newValue == '') {
                valueToWrite = (0).toFixed(precisionValue);
            } else {
                var valueAsNum = parseFloat(newValue);
                valueToWrite = accounting.formatMoney(valueAsNum, "", precisionValue);
            }

            if (valueToWrite !== current) {
                target(valueToWrite);
            } else {
                if (newValue !== current) {
                    target.notifySubscribers(valueToWrite);
                }
            }
        }
    });

    result(target());
    return result;
};

ko.extenders.splitFloat = function(target) {

    var intComponent = ko.observable();
    var fracComponent = ko.observable();

    var result = ko.computed({
        read: function() {
            var theInteger = isNaN(parseFloat(intComponent())) ? 0 : parseFloat(intComponent());
            var theFraction = isNaN(parseFloat(fracComponent())) ? 0 : parseFloat(fracComponent());
            return theInteger + theFraction;
        },
        write: function(newValue) {
            intComponent(Math.floor(newValue));
            fracComponent(newValue - intComponent());
        }
    });

    result.integer = intComponent;
    result.fraction = fracComponent;

    result(target());
    return result;
};

ko.bindingHandlers.valueWithAutoValidation = {
    init: ko.bindingHandlers.value.init,
    update: function(element) {
        ko.bindingHandlers.value.update.apply(this, arguments);
        try {
            $(element).valid();
        } catch(e) {
            // this will fail sometimes during quick view for any services which use templates that have this bindingHandler.
            // I don't know why, but it doesn't matter since we don't need validation there anyway.
        }
    }
};

</script>


<div id="serviceViewWindow" class="read-only" style="display: none;">
    <div data-bind="template: { name: 'PlanOfServiceTemplate', data: serviceToView, afterRender: viewWindowAfterRender }">
        <fieldset class="fieldset-container-one" id="serviceInfo">
            <legend class="legend-header-one">Service Information</legend>
            <div class="form-group" data-bind="visible: InQuickView()" style="display: none;">
                <label for="ServiceName" class="submit-required" data-bind="updateCompleteRequired: true">POS Service:<span class="ui-hide submit-required-title">This field is required to submit.</span><span class="submit-required-indicator" title="This field is required to submit." aria-hidden="true" role="presentation">**</span></label>
                <input id="ServiceName" name="ServiceServiceName" type="text" data-bind="value: ServiceName" class="" readonly="readonly">
            </div>
            <div class="form-group" data-bind="visible: !InQuickView()">
                <label for="Service_ServiceId" class="submit-required" data-bind="updateCompleteRequired: true">POS Service:<span class="ui-hide submit-required-title">This field is required to submit.</span><span class="submit-required-indicator" title="This field is required to submit." aria-hidden="true" role="presentation">**</span></label>

                <span class="field-validation-valid" data-valmsg-replace="true" data-valmsg-for="Service.ServiceId" data-valmsg="POS Service is required."></span>
                <input id="Service_ServiceId" type="text" name="Service.ServiceId" value=" " readonly="readonly" class="readonly"></div>
            <div class="form-group" data-bind="visible: PlanOfServiceType().Name" style="display: none;">
                <span class="label">Service Type:</span><span class="data-element readonly" data-bind="text: PlanOfServiceType().Name"></span>
            </div>
            <div class="form-group" data-bind="visible: IsSharedAttendantCare()" style="display: none;">
                <label for="Service_SharingClientName" class="submit-required" data-bind="updateCompleteRequired: true">Client Sharing this Service:<span class="ui-hide submit-required-title">This field is required to submit.</span><span class="submit-required-indicator" title="This field is required to submit." aria-hidden="true" role="presentation">**</span></label>
                <input type="text" id="Service_SharingClientName" name="Service.SharingClientName" data-bind="value: SharingClient().ClientName()" class="readonly re-validate" readonly="readonly">
                <input id="clientSearchButton" type="button" value="Search" data-bind="click: $root.clickClientSearchButton" readonly="readonly" style="display: none;">
                <input id="clearClientSearchButton" type="button" value="Clear" data-bind="visible:canClearSharingClient(), click: clearSharingClient" readonly="readonly" style="display: none;">
                <span class="field-validation-valid" data-valmsg-replace="true" data-valmsg-for="Service.SharingClientName" data-valmsg="Sharing client Name is required."></span>
            </div>
            <div class="form-group" data-bind="visible: IsSharedAttendantCare() &amp;&amp; SharingClient().ClientId()" style="display: none;">
                <span class="label">Client ID:</span>
                <span data-bind="text: SharingClient().ClientIdentifier()"></span>
                &nbsp;<a data-bind="if:SharingClient().ClientId(), attr: { href:SharingClient().ProfileLink, target:'_blank' }" href="/ltss/WebSites/MDHotFixQC/Ltss.Web/CasePrograms/CaseProgram/ClientSummary/?clientId=undefined" target="_blank"></a>
            </div>
            <div class="form-group" data-bind="visible: IsTransitionService()" style="display: none;">
                <label for="Service_TransitionServiceId" data-bind="css: { 'complete-required': !$root.isProvisional }, updateCompleteRequired: !$root.isProvisional" class="submit-required">Specify:<span class="ui-hide submit-required-title">This field is required to submit.</span><span class="submit-required-indicator" title="This field is required to submit." aria-hidden="true" role="presentation">**</span></label>

                <span class="field-validation-valid" data-valmsg-replace="true" data-valmsg-for="Service.TransitionServiceId" data-valmsg="Transition service type is required."></span>
                <input id="Service_TransitionServiceId" type="text" name="Service.TransitionServiceId" value=" " readonly="readonly" class="readonly"></div>
            <div class="form-group" data-bind="visible: IsTransitionService() &amp;&amp; IsTransitionServiceTypeOther()" style="display: none;">
                <label for="Service_TransitionServiceOther" data-bind="css: { 'complete-required': !$root.isProvisional }, updateCompleteRequired: !$root.isProvisional" class="submit-required">Specify Other:<span class="ui-hide submit-required-title">This field is required to submit.</span><span class="submit-required-indicator" title="This field is required to submit." aria-hidden="true" role="presentation">**</span></label>
                <textarea id="Service_TransitionServiceOther" name="Service.TransitionServiceOther" class="comments-textarea" data-bind="value: TransitionServiceTypeSpecifyOther, css: { required: !$root.isProvisional }" readonly="readonly"></textarea>
                <span class="field-validation-valid" data-valmsg-replace="true" data-valmsg-for="Service.TransitionServiceOther" data-valmsg="Specify other is required."></span>
            </div>
            <div class="form-group" data-bind="visible: IsMfpFlexibleFunds()" style="display: none;">
                <label for="Service_MfpFlexibleFundsServiceTypeId" data-bind="css: { 'complete-required': !$root.isProvisional }, updateCompleteRequired: !$root.isProvisional" class="submit-required">Specify:<span class="ui-hide submit-required-title">This field is required to submit.</span><span class="submit-required-indicator" title="This field is required to submit." aria-hidden="true" role="presentation">**</span></label>

                <span class="field-validation-valid" data-valmsg-replace="true" data-valmsg-for="Service.MfpFlexibleFundsServiceTypeId" data-valmsg="MFP Flexible Funds service type is required."></span>
                <input id="Service_MfpFlexibleFundsServiceTypeId" type="text" name="Service.MfpFlexibleFundsServiceTypeId" value=" " readonly="readonly" class="readonly"></div>
            <fieldset class="fieldset-container-two" id="FrequencyInfo" data-bind="visible: TemplateToUse" style="display: none;">
                <legend class="legend-header-two">Frequency Type</legend>
                <div class="form-group" id="calculationInputs" data-bind="template: { name: TemplateToUse(), data: $data }"></div>
                <div class="form-group" data-bind="visible: IsNurseMonitoring() &amp;&amp; !$root.hideNurseMonitoringFrequency" style="display: none;">
                    <label for="Service_NoOfNurseMonitoringDays" data-bind="css: { 'complete-required': !$root.isProvisional }, updateCompleteRequired: !$root.isProvisional" class="submit-required">Nurse Monitoring will be performed every: <span class="ui-hide submit-required-title">This field is required to submit.</span><span class="submit-required-indicator" title="This field is required to submit." aria-hidden="true" role="presentation">**</span></label>
                    <input id="Service_NoOfNurseMonitoringDays" name="Service.NoOfNurseMonitoringDays" type="text" data-bind="value: NOfDaysNurseMonitoringWillBePerformed, css: {required: !$root.isProvisional} " class="digits textbox-small" readonly="readonly">
                    (days).
                    <span class="field-validation-valid" data-valmsg-replace="true" data-valmsg-for="Service.NoOfNurseMonitoringDays"></span>
                </div>
                <div class="form-group">
                    <label for="AnnualCost">Annual Cost ($):</label>
                    <input id="AnnualCost" class="textbox-small" type="text" readonly="readonly" data-bind="value: AnnualTotal">
                </div>
            </fieldset>
        </fieldset>
        <fieldset class="fieldset-container-one" id="providerInfo">
            <legend class="legend-header-one">Provider Information</legend>
            <div class="form-group" data-bind="visible: !UseFiProvider()">
                <label for="ProviderFacilityName" data-bind="css: { 'submit-required' : ProviderRequiredForSubmit }, updateSubmitRequired: ProviderRequiredForSubmit" class="submit-required">Provider Name:<span class="ui-hide submit-required-title">This field is required to submit.</span><span class="submit-required-indicator" title="This field is required to submit." aria-hidden="true" role="presentation">**</span></label>
                <input type="text" name="ProviderFacilityName" id="ProviderFacilityName" data-bind="value: ProviderLocationName" class="readonly re-validate" readonly="readonly">
                <input id="fakeOpenServiceProviderSearchButton" type="button" value="Search" data-bind="visible: !IsNurseMonitoring() , click: $root.clickProviderSearchButton" readonly="readonly" style="display: none;">
                <input id="clearServiceProviderButton" type="button" value="Clear" data-bind="visible: canClearProvider() &amp;&amp; !IsNurseMonitoring() , click: clearProviderInfo" readonly="readonly" style="display: none;">
                <span class="field-validation-valid" data-valmsg-replace="true" data-valmsg-for="ProviderFacilityName" data-valmsg="Provider Name is required."></span>
            </div>
            <div data-bind="if: UseFiProvider() &amp;&amp; !InQuickView()"></div>
            <div data-bind="if: UseFiProvider() &amp;&amp; InQuickView()"></div>
            <div data-bind="if: !UseFiProvider()">
                <div class="form-group" data-bind="visible: ProviderLocationNumber" style="display: none;">
                    <label for="ProviderFacilityNumber">Provider Number:</label>
                    <input type="text" name="ProviderFacilityNumber" id="ProviderFacilityNumber" data-bind="value: ProviderLocationNumber" readonly="readonly">
                </div>
            </div>
            <div data-bind="if: !UseFiProvider()">
                <div class="form-group" data-bind="visible: ProviderLocationTypeName" style="display: none;">
                    <label for="ProviderLocationTypeName">Provider Type:</label>
                    <input type="text" name="ProviderLocationTypeName" id="ProviderLocationTypeName" data-bind="value: ProviderLocationTypeName" readonly="readonly">
                </div>
            </div>
            <div class="form-group">
                <label for="ServiceDetailsReason">Reason for Service/Details:</label>
                <textarea id="ServiceDetailsReason" class="comments-textarea" data-bind="value: ServiceReasonDescription" readonly="readonly"></textarea>
            </div>
        </fieldset>

        <!-- ko if: CanEmergencyBackupBill() --><!-- /ko -->
    </div>
    <hr>
    <div class="center">
        <input type="button" value="Close" id="serviceViewWindowClose">
    </div>
</div>

</div>




<script>

    function formatChildform-group(parentTrElement, planService) {
        var htmlAsString = ich.serviceChildform-group(planService, true);
        return htmlAsString;
    }

    function setUpChildform-groupsForTable($table, serviceViewModel) {
        var dataTable = $table.data("dataTableInstance");
        var form-groups = $table.find("tr[data-plan-service-id]");

        $.each(form-groups, function (index, element) {
            var $form-group = $(element);
            var planServiceId = $form-group.attr('data-plan-service-id');
            var planServiceJs = serviceViewModel.getServiceJsObjectFromId(planServiceId);

            var addedTr = dataTable.fnOpen(element, formatChildform-group(element, planServiceJs), 'classGivenToAddedTr');
            var $addedTr = $(addedTr);
            $addedTr.attr('data-parent-of-plan-service-id', planServiceId);
            if (planServiceJs.PlanServiceRevisionStatus.Name == 'Deleted') {
                $addedTr.attr("data-service-is-deleted", "");
            }

            var $parentPlanServiceTable = $addedTr.find("[data-parent-plan-service-table]");
            var $openIndicator = $form-group.find("[data-open-parent-plan-service]").parents("tr");
            var $openIndicatorSwap = $form-group.find("[data-open-parent-plan-service]");
            function expandCollapseTableform-group() {
                if ($parentPlanServiceTable.is(":visible")) {
                    //$openIndicator.removeAttr(":focus");
                    $parentPlanServiceTable.hide();
                    $openIndicatorSwap.addClass("icon-caret-right").removeClass("icon-caret-down");
                    $parentPlanServiceTable.parent().removeClass("parent-td-outline");
                    $parentPlanServiceTable.parents("tr").prev("tr").children("td").removeClass("parent-sibling-td-outline");
                } else {
                    //$openIndicator.focus();
                    $parentPlanServiceTable.show();
                    $openIndicatorSwap.addClass("icon-caret-down").removeClass("icon-caret-right");
                    $parentPlanServiceTable.parent().addClass("parent-td-outline");
                    $parentPlanServiceTable.parents("tr").prev("tr").children("td").addClass("parent-sibling-td-outline");

                }
            }
            $openIndicator.click(function () {
                expandCollapseTableform-group();
            });

            $openIndicatorSwap.keyup(function (event) {
                if (event.which == 13) {
                    expandCollapseTableform-group();
                }
            });
        });
    }

</script>


<script>
    function ViewServicesViewModel () {
        var self = this;

        var flexibleBudgetServices = [];
        var allOtherServices = [{"CreatedDate":"\/Date(1388966219343)\/","ClientId":"clients/D15B80FB-6766-E211-8859-00155D0A3228","SharingClientId":null,"SharingClient":null,"ServiceId":"planservices/29795","ParentPlanServiceId":null,"ParentPlanService":null,"HasParentPlanService":false,"PlanServiceRevisionStatus":{"Value":4,"Name":"New","Attributes":null},"IsServiceDeleted":false,"IsServiceRevised":false,"ServiceDataId":"patch/1/1/2014/2","ServiceDefinitionDataId":"servicedefinitions/4482","ServiceName":"Assisted Living Level 2 w/o AMDC","PlanOfServiceType":{"Value":0,"Name":"Waiver Service","Attributes":null},"ProviderFacilityLocationId":"locations/2F62E3E4-6766-E211-8859-00155D0A3228","ProviderLocationName":"VORIZEN ASSISTED LIVING","ProviderLocationNumber":"067604700","ProviderLocationTypeName":"CO/CFC","Rate":58.52,"Units":5,"Frequency":44,"UnitsTableText":"5 days per week","FrequencyTableText":"44 weeks","FrequencyType":{"Value":1,"Name":"Weekly","Attributes":null},"ServiceReasonDescription":"FOR ALF: THERE IS NO SEPARATE COVERAGE FOR NURSE MONITORING FOR ALF PLACEMENTS: Nurse monitoring every 45 days provided by ALF delegated nurse","CalculationType":"UnitRateFrequency","ProcedureCode":"W0226","CalculateUnitsBasedOn":0,"UnitType":null,"IsOtherService":false,"ItemDescription":null,"IsSharedAttendantCare":false,"IsIsasBillable":false,"IsFlexibleBudget":false,"IsMfpFlexibleFunds":false,"MfpFlexibleFundsServiceTypeId":null,"ShouldAlertFi":false,"IsTransitionService":false,"CanEditRate":true,"CanEmergencyBackupBill":false,"IsNurseMonitoring":false,"NOfDaysNurseMonitoringWillBePerformed":null,"UnitsHoursPerDay":0,"UnitsDaysPerWeek":0,"UnitsFactor":0,"PreCalculatedUnits":0,"MonthlyTotal":1072.8667,"AnnualTotal":12874.4,"FrequencyDataList":[{"RateDefault":58.52,"MaximumRate":58.52,"MinimumRate":0,"RatePrecision":2,"UnitDefault":0,"MinimumUnit":0,"MaximumUnit":7,"FrequencyDefault":0,"MaximumFrequency":52,"FrequencyType":{"Value":1,"Name":"Weekly","Attributes":null},"CalculationType":"UnitRateFrequency","RateDisplayText":"","UnitDisplayText":"","FrequencyDisplayText":"","Comments":"","Id":"frequencydatas/28034","HoursPerDayMaximum":0,"DaysPerWeekMaximum":0,"PreCalculatedUnitsMaximum":0,"OtherHoursMaximum":0,"OtherItemsMaximum":0,"OtherDaysMaximum":0,"DefaultUnitType":{"Value":0,"Name":"Hours","Attributes":null}}],"UserInterfaceType":{"Value":0,"Name":"Days Per Week","Attributes":null},"WeeklyServiceHours":null,"ProviderSignature":{"ProviderId":"locations/2F62E3E4-6766-E211-8859-00155D0A3228","DisplayCategory":null,"NameSigningOnBehalfOf":null,"SignedName":"Vorizen Assisted Living","SignedDate":"\/Date(1380513600000)\/","ClientPersonSignatureId":null,"SignedDateFormatted":"09/30/2013"},"TransitionServiceTypeId":null,"TransitionServiceTypeSpecifyOther":null,"TransitionServiceType":{"Id":null,"Category":null,"ParentId":null,"Abbreviation":null,"Name":null,"Description":null,"SortOrder":null,"Inactive":false,"RuleAttributes":[]},"RatePrecision":2},{"CreatedDate":"\/Date(1388966219343)\/","ClientId":"clients/D15B80FB-6766-E211-8859-00155D0A3228","SharingClientId":null,"SharingClient":null,"ServiceId":"planservices/29796","ParentPlanServiceId":null,"ParentPlanService":null,"HasParentPlanService":false,"PlanServiceRevisionStatus":{"Value":4,"Name":"New","Attributes":null},"IsServiceDeleted":false,"IsServiceRevised":false,"ServiceDataId":"patch/1/1/2014/38","ServiceDefinitionDataId":"servicedefinitions/4584","ServiceName":"Supports Planning","PlanOfServiceType":{"Value":3,"Name":"Community First Choice","Attributes":null},"ProviderFacilityLocationId":"locations/BB54E3E4-6766-E211-8859-00155D0A3228","ProviderLocationName":"BALTIMORE CO DEPART OF AGING","ProviderLocationNumber":"552219600","ProviderLocationTypeName":"CO/CFC","Rate":15.006,"Units":208,"Frequency":1,"UnitsTableText":"52 hours per year","FrequencyTableText":"1 year","FrequencyType":{"Value":3,"Name":"Annual","Attributes":null},"ServiceReasonDescription":null,"CalculationType":"UnitFactorRateFrequencyHoursPerDay","ProcedureCode":"W5525","CalculateUnitsBasedOn":0,"UnitType":null,"IsOtherService":false,"ItemDescription":null,"IsSharedAttendantCare":false,"IsIsasBillable":false,"IsFlexibleBudget":false,"IsMfpFlexibleFunds":false,"MfpFlexibleFundsServiceTypeId":null,"ShouldAlertFi":false,"IsTransitionService":false,"CanEditRate":false,"CanEmergencyBackupBill":false,"IsNurseMonitoring":false,"NOfDaysNurseMonitoringWillBePerformed":null,"UnitsHoursPerDay":0,"UnitsDaysPerWeek":0,"UnitsFactor":4,"PreCalculatedUnits":52,"MonthlyTotal":260.104,"AnnualTotal":3121.248,"FrequencyDataList":[{"RateDefault":15.006,"MaximumRate":15.006,"MinimumRate":0,"RatePrecision":4,"UnitDefault":0,"MinimumUnit":0,"MaximumUnit":672,"FrequencyDefault":0,"MaximumFrequency":52,"FrequencyType":{"Value":0,"Name":"Daily","Attributes":null},"CalculationType":"UnitRateFrequency","RateDisplayText":"","UnitDisplayText":"","FrequencyDisplayText":"","Comments":"","Id":"frequencydatas/28305","HoursPerDayMaximum":24,"DaysPerWeekMaximum":7,"PreCalculatedUnitsMaximum":168,"OtherHoursMaximum":0,"OtherItemsMaximum":0,"OtherDaysMaximum":0,"DefaultUnitType":{"Value":0,"Name":"Hours","Attributes":null}},{"RateDefault":15.006,"MaximumRate":15.006,"MinimumRate":0,"RatePrecision":4,"UnitDefault":0,"MinimumUnit":0,"MaximumUnit":672,"FrequencyDefault":0,"MaximumFrequency":52,"FrequencyType":{"Value":1,"Name":"Weekly","Attributes":null},"CalculationType":"UnitRateFrequency","RateDisplayText":"","UnitDisplayText":"","FrequencyDisplayText":"","Comments":"","Id":"frequencydatas/28306","HoursPerDayMaximum":24,"DaysPerWeekMaximum":0,"PreCalculatedUnitsMaximum":168,"OtherHoursMaximum":0,"OtherItemsMaximum":0,"OtherDaysMaximum":0,"DefaultUnitType":{"Value":0,"Name":"Hours","Attributes":null}},{"RateDefault":15.006,"MaximumRate":15.006,"MinimumRate":0,"RatePrecision":4,"UnitDefault":0,"MinimumUnit":0,"MaximumUnit":2928,"FrequencyDefault":0,"MaximumFrequency":12,"FrequencyType":{"Value":2,"Name":"Monthly","Attributes":null},"CalculationType":"UnitRateFrequency","RateDisplayText":"","UnitDisplayText":"","FrequencyDisplayText":"","Comments":"","Id":"frequencydatas/28307","HoursPerDayMaximum":0,"DaysPerWeekMaximum":0,"PreCalculatedUnitsMaximum":732,"OtherHoursMaximum":0,"OtherItemsMaximum":0,"OtherDaysMaximum":0,"DefaultUnitType":{"Value":0,"Name":"Hours","Attributes":null}},{"RateDefault":15.006,"MaximumRate":15.006,"MinimumRate":0,"RatePrecision":4,"UnitDefault":0,"MinimumUnit":0,"MaximumUnit":35136,"FrequencyDefault":1,"MaximumFrequency":1,"FrequencyType":{"Value":3,"Name":"Annual","Attributes":null},"CalculationType":"UnitRateFrequency","RateDisplayText":"","UnitDisplayText":"","FrequencyDisplayText":"","Comments":"","Id":"frequencydatas/28308","HoursPerDayMaximum":0,"DaysPerWeekMaximum":0,"PreCalculatedUnitsMaximum":8784,"OtherHoursMaximum":0,"OtherItemsMaximum":0,"OtherDaysMaximum":0,"DefaultUnitType":{"Value":0,"Name":"Hours","Attributes":null}}],"UserInterfaceType":{"Value":9,"Name":"Random Time Period Unit Factor","Attributes":null},"WeeklyServiceHours":null,"ProviderSignature":{"ProviderId":"locations/BB54E3E4-6766-E211-8859-00155D0A3228","DisplayCategory":null,"NameSigningOnBehalfOf":null,"SignedName":"Ann-Laurie Hyman","SignedDate":"\/Date(1372651200000)\/","ClientPersonSignatureId":null,"SignedDateFormatted":"07/01/2013"},"TransitionServiceTypeId":null,"TransitionServiceTypeSpecifyOther":null,"TransitionServiceType":{"Id":null,"Category":null,"ParentId":null,"Abbreviation":null,"Name":null,"Description":null,"SortOrder":null,"Inactive":false,"RuleAttributes":[]},"RatePrecision":4},{"CreatedDate":"\/Date(1388966219343)\/","ClientId":"clients/D15B80FB-6766-E211-8859-00155D0A3228","SharingClientId":null,"SharingClient":null,"ServiceId":"planservices/39594","ParentPlanServiceId":null,"ParentPlanService":null,"HasParentPlanService":false,"PlanServiceRevisionStatus":{"Value":4,"Name":"New","Attributes":null},"IsServiceDeleted":false,"IsServiceRevised":false,"ServiceDataId":"patch/1/1/2014/109","ServiceDefinitionDataId":"servicedefinitions/4527","ServiceName":"Disposable Medical Supplies","PlanOfServiceType":{"Value":1,"Name":"State Plan Service","Attributes":null},"ProviderFacilityLocationId":"locations/1560","ProviderLocationName":"AMERICAN MEDICAL EQUIPMENT","ProviderLocationNumber":"610009100","ProviderLocationTypeName":"CO/CFC","Rate":227.4,"Units":1,"Frequency":10,"UnitsTableText":"1 item","FrequencyTableText":"10 months","FrequencyType":{"Value":2,"Name":"Monthly","Attributes":null},"ServiceReasonDescription":"Pull-ups @ $176.40; under pads @ $51","CalculationType":"UnitRateFrequency","ProcedureCode":null,"CalculateUnitsBasedOn":0,"UnitType":{"Value":1,"Name":"Items","Attributes":null},"IsOtherService":false,"ItemDescription":null,"IsSharedAttendantCare":false,"IsIsasBillable":false,"IsFlexibleBudget":false,"IsMfpFlexibleFunds":false,"MfpFlexibleFundsServiceTypeId":null,"ShouldAlertFi":false,"IsTransitionService":false,"CanEditRate":true,"CanEmergencyBackupBill":false,"IsNurseMonitoring":false,"NOfDaysNurseMonitoringWillBePerformed":null,"UnitsHoursPerDay":0,"UnitsDaysPerWeek":0,"UnitsFactor":0,"PreCalculatedUnits":0,"MonthlyTotal":189.5,"AnnualTotal":2274,"FrequencyDataList":[{"RateDefault":0,"MaximumRate":15000,"MinimumRate":0,"RatePrecision":2,"UnitDefault":0,"MinimumUnit":0,"MaximumUnit":7,"FrequencyDefault":0,"MaximumFrequency":52,"FrequencyType":{"Value":1,"Name":"Weekly","Attributes":null},"CalculationType":"UnitRateFrequency","RateDisplayText":"","UnitDisplayText":"","FrequencyDisplayText":"","Comments":"","Id":"frequencydatas/28159","HoursPerDayMaximum":0,"DaysPerWeekMaximum":0,"PreCalculatedUnitsMaximum":0,"OtherHoursMaximum":168,"OtherItemsMaximum":100,"OtherDaysMaximum":7,"DefaultUnitType":{"Value":1,"Name":"Items","Attributes":null}},{"RateDefault":0,"MaximumRate":15000,"MinimumRate":0,"RatePrecision":2,"UnitDefault":0,"MinimumUnit":0,"MaximumUnit":31,"FrequencyDefault":0,"MaximumFrequency":12,"FrequencyType":{"Value":2,"Name":"Monthly","Attributes":null},"CalculationType":"UnitRateFrequency","RateDisplayText":"","UnitDisplayText":"","FrequencyDisplayText":"","Comments":"","Id":"frequencydatas/28160","HoursPerDayMaximum":0,"DaysPerWeekMaximum":0,"PreCalculatedUnitsMaximum":0,"OtherHoursMaximum":732,"OtherItemsMaximum":1000,"OtherDaysMaximum":31,"DefaultUnitType":{"Value":1,"Name":"Items","Attributes":null}},{"RateDefault":0,"MaximumRate":15000,"MinimumRate":0,"RatePrecision":2,"UnitDefault":0,"MinimumUnit":0,"MaximumUnit":366,"FrequencyDefault":1,"MaximumFrequency":1,"FrequencyType":{"Value":3,"Name":"Annual","Attributes":null},"CalculationType":"UnitRateFrequency","RateDisplayText":"","UnitDisplayText":"","FrequencyDisplayText":"","Comments":"","Id":"frequencydatas/28161","HoursPerDayMaximum":0,"DaysPerWeekMaximum":0,"PreCalculatedUnitsMaximum":0,"OtherHoursMaximum":8784,"OtherItemsMaximum":12000,"OtherDaysMaximum":366,"DefaultUnitType":{"Value":1,"Name":"Items","Attributes":null}}],"UserInterfaceType":{"Value":8,"Name":"Other","Attributes":null},"WeeklyServiceHours":null,"ProviderSignature":{"ProviderId":"locations/1560","DisplayCategory":null,"NameSigningOnBehalfOf":null,"SignedName":"American Medical","SignedDate":"\/Date(1380513600000)\/","ClientPersonSignatureId":null,"SignedDateFormatted":"09/30/2013"},"TransitionServiceTypeId":null,"TransitionServiceTypeSpecifyOther":null,"TransitionServiceType":{"Id":null,"Category":null,"ParentId":null,"Abbreviation":null,"Name":null,"Description":null,"SortOrder":null,"Inactive":false,"RuleAttributes":[]},"RatePrecision":2},{"CreatedDate":"\/Date(1388966219343)\/","ClientId":"clients/D15B80FB-6766-E211-8859-00155D0A3228","SharingClientId":null,"SharingClient":null,"ServiceId":"planservices/39597","ParentPlanServiceId":null,"ParentPlanService":null,"HasParentPlanService":false,"PlanServiceRevisionStatus":{"Value":4,"Name":"New","Attributes":null},"IsServiceDeleted":false,"IsServiceRevised":false,"ServiceDataId":"patch/1/1/2014/29","ServiceDefinitionDataId":"servicedefinitions/4576","ServiceName":"Technology â€” Other","PlanOfServiceType":{"Value":3,"Name":"Community First Choice","Attributes":null},"ProviderFacilityLocationId":"locations/1560","ProviderLocationName":"AMERICAN MEDICAL EQUIPMENT","ProviderLocationNumber":"610009100","ProviderLocationTypeName":"CO/CFC","Rate":287.52,"Units":1,"Frequency":0,"UnitsTableText":"1 hour","FrequencyTableText":"0 weeks","FrequencyType":{"Value":1,"Name":"Weekly","Attributes":null},"ServiceReasonDescription":"Wipes @ $71.88 per case; one case every 3 months","CalculationType":"UnitRateFrequency","ProcedureCode":"W5514","CalculateUnitsBasedOn":0,"UnitType":{"Value":0,"Name":"Hours","Attributes":null},"IsOtherService":false,"ItemDescription":null,"IsSharedAttendantCare":false,"IsIsasBillable":false,"IsFlexibleBudget":false,"IsMfpFlexibleFunds":false,"MfpFlexibleFundsServiceTypeId":null,"ShouldAlertFi":false,"IsTransitionService":false,"CanEditRate":true,"CanEmergencyBackupBill":false,"IsNurseMonitoring":false,"NOfDaysNurseMonitoringWillBePerformed":null,"UnitsHoursPerDay":0,"UnitsDaysPerWeek":0,"UnitsFactor":0,"PreCalculatedUnits":0,"MonthlyTotal":0,"AnnualTotal":0,"FrequencyDataList":[{"RateDefault":0,"MaximumRate":15000,"MinimumRate":0,"RatePrecision":2,"UnitDefault":0,"MinimumUnit":0,"MaximumUnit":7,"FrequencyDefault":0,"MaximumFrequency":52,"FrequencyType":{"Value":1,"Name":"Weekly","Attributes":null},"CalculationType":"UnitRateFrequency","RateDisplayText":"","UnitDisplayText":"","FrequencyDisplayText":"","Comments":"","Id":"frequencydatas/28283","HoursPerDayMaximum":0,"DaysPerWeekMaximum":0,"PreCalculatedUnitsMaximum":0,"OtherHoursMaximum":168,"OtherItemsMaximum":100,"OtherDaysMaximum":7,"DefaultUnitType":{"Value":0,"Name":"Hours","Attributes":null}},{"RateDefault":0,"MaximumRate":15000,"MinimumRate":0,"RatePrecision":2,"UnitDefault":0,"MinimumUnit":0,"MaximumUnit":31,"FrequencyDefault":0,"MaximumFrequency":12,"FrequencyType":{"Value":2,"Name":"Monthly","Attributes":null},"CalculationType":"UnitRateFrequency","RateDisplayText":"","UnitDisplayText":"","FrequencyDisplayText":"","Comments":"","Id":"frequencydatas/28284","HoursPerDayMaximum":0,"DaysPerWeekMaximum":0,"PreCalculatedUnitsMaximum":0,"OtherHoursMaximum":732,"OtherItemsMaximum":1000,"OtherDaysMaximum":31,"DefaultUnitType":{"Value":0,"Name":"Hours","Attributes":null}}],"UserInterfaceType":{"Value":8,"Name":"Other","Attributes":null},"WeeklyServiceHours":null,"ProviderSignature":{"ProviderId":"locations/1560","DisplayCategory":null,"NameSigningOnBehalfOf":null,"SignedName":"American Medical","SignedDate":"\/Date(1380513600000)\/","ClientPersonSignatureId":null,"SignedDateFormatted":"09/30/2013"},"TransitionServiceTypeId":null,"TransitionServiceTypeSpecifyOther":null,"TransitionServiceType":{"Id":null,"Category":null,"ParentId":null,"Abbreviation":null,"Name":null,"Description":null,"SortOrder":null,"Inactive":false,"RuleAttributes":[]},"RatePrecision":2},{"CreatedDate":"\/Date(1388966219343)\/","ClientId":"clients/D15B80FB-6766-E211-8859-00155D0A3228","SharingClientId":null,"SharingClient":null,"ServiceId":"planservices/39598","ParentPlanServiceId":null,"ParentPlanService":null,"HasParentPlanService":false,"PlanServiceRevisionStatus":{"Value":4,"Name":"New","Attributes":null},"IsServiceDeleted":false,"IsServiceRevised":false,"ServiceDataId":"patch/1/1/2014/8","ServiceDefinitionDataId":"servicedefinitions/4487","ServiceName":"Medical Day Care","PlanOfServiceType":{"Value":0,"Name":"Waiver Service","Attributes":null},"ProviderFacilityLocationId":"locations/1954","ProviderLocationName":"LEVINDALE ADULT TRTMT CTR","ProviderLocationNumber":"780093200","ProviderLocationTypeName":"","Rate":73.58,"Units":2,"Frequency":44,"UnitsTableText":"2 days per week","FrequencyTableText":"44 weeks","FrequencyType":{"Value":1,"Name":"Weekly","Attributes":null},"ServiceReasonDescription":"AMDC 2x a week","CalculationType":"UnitRateFrequency","ProcedureCode":"S5102","CalculateUnitsBasedOn":0,"UnitType":null,"IsOtherService":false,"ItemDescription":null,"IsSharedAttendantCare":false,"IsIsasBillable":false,"IsFlexibleBudget":false,"IsMfpFlexibleFunds":false,"MfpFlexibleFundsServiceTypeId":null,"ShouldAlertFi":false,"IsTransitionService":false,"CanEditRate":true,"CanEmergencyBackupBill":false,"IsNurseMonitoring":false,"NOfDaysNurseMonitoringWillBePerformed":null,"UnitsHoursPerDay":0,"UnitsDaysPerWeek":0,"UnitsFactor":0,"PreCalculatedUnits":0,"MonthlyTotal":539.5867,"AnnualTotal":6475.04,"FrequencyDataList":[{"RateDefault":73.58,"MaximumRate":73.58,"MinimumRate":0,"RatePrecision":2,"UnitDefault":1,"MinimumUnit":0,"MaximumUnit":7,"FrequencyDefault":0,"MaximumFrequency":52,"FrequencyType":{"Value":1,"Name":"Weekly","Attributes":null},"CalculationType":"UnitRateFrequency","RateDisplayText":"","UnitDisplayText":"","FrequencyDisplayText":"","Comments":"","Id":"frequencydatas/28044","HoursPerDayMaximum":0,"DaysPerWeekMaximum":0,"PreCalculatedUnitsMaximum":0,"OtherHoursMaximum":0,"OtherItemsMaximum":0,"OtherDaysMaximum":0,"DefaultUnitType":{"Value":0,"Name":"Hours","Attributes":null}}],"UserInterfaceType":{"Value":0,"Name":"Days Per Week","Attributes":null},"WeeklyServiceHours":null,"ProviderSignature":{"ProviderId":"locations/1954","DisplayCategory":null,"NameSigningOnBehalfOf":null,"SignedName":"Levindale","SignedDate":"\/Date(1380513600000)\/","ClientPersonSignatureId":null,"SignedDateFormatted":"09/30/2013"},"TransitionServiceTypeId":null,"TransitionServiceTypeSpecifyOther":null,"TransitionServiceType":{"Id":null,"Category":null,"ParentId":null,"Abbreviation":null,"Name":null,"Description":null,"SortOrder":null,"Inactive":false,"RuleAttributes":[]},"RatePrecision":2},{"CreatedDate":"\/Date(1388966219343)\/","ClientId":"clients/D15B80FB-6766-E211-8859-00155D0A3228","SharingClientId":null,"SharingClient":null,"ServiceId":"planservices/39602","ParentPlanServiceId":null,"ParentPlanService":null,"HasParentPlanService":false,"PlanServiceRevisionStatus":{"Value":4,"Name":"New","Attributes":null},"IsServiceDeleted":false,"IsServiceRevised":false,"ServiceDataId":"patch/1/1/2014/1","ServiceDefinitionDataId":"servicedefinitions/4481","ServiceName":"Assisted Living Level 2 w/ AMDC","PlanOfServiceType":{"Value":0,"Name":"Waiver Service","Attributes":null},"ProviderFacilityLocationId":"locations/2F62E3E4-6766-E211-8859-00155D0A3228","ProviderLocationName":"VORIZEN ASSISTED LIVING","ProviderLocationNumber":"067604700","ProviderLocationTypeName":"CO/CFC","Rate":43.9,"Units":2,"Frequency":44,"UnitsTableText":"2 days per week","FrequencyTableText":"44 weeks","FrequencyType":{"Value":1,"Name":"Weekly","Attributes":null},"ServiceReasonDescription":null,"CalculationType":"UnitRateFrequency","ProcedureCode":"W0228","CalculateUnitsBasedOn":0,"UnitType":null,"IsOtherService":false,"ItemDescription":null,"IsSharedAttendantCare":false,"IsIsasBillable":false,"IsFlexibleBudget":false,"IsMfpFlexibleFunds":false,"MfpFlexibleFundsServiceTypeId":null,"ShouldAlertFi":false,"IsTransitionService":false,"CanEditRate":true,"CanEmergencyBackupBill":false,"IsNurseMonitoring":false,"NOfDaysNurseMonitoringWillBePerformed":null,"UnitsHoursPerDay":0,"UnitsDaysPerWeek":0,"UnitsFactor":0,"PreCalculatedUnits":0,"MonthlyTotal":321.9333,"AnnualTotal":3863.2,"FrequencyDataList":[{"RateDefault":43.9,"MaximumRate":43.9,"MinimumRate":0,"RatePrecision":2,"UnitDefault":0,"MinimumUnit":0,"MaximumUnit":7,"FrequencyDefault":0,"MaximumFrequency":52,"FrequencyType":{"Value":1,"Name":"Weekly","Attributes":null},"CalculationType":"UnitRateFrequency","RateDisplayText":"","UnitDisplayText":"","FrequencyDisplayText":"","Comments":"","Id":"frequencydatas/28033","HoursPerDayMaximum":0,"DaysPerWeekMaximum":0,"PreCalculatedUnitsMaximum":0,"OtherHoursMaximum":0,"OtherItemsMaximum":0,"OtherDaysMaximum":0,"DefaultUnitType":{"Value":0,"Name":"Hours","Attributes":null}}],"UserInterfaceType":{"Value":0,"Name":"Days Per Week","Attributes":null},"WeeklyServiceHours":null,"ProviderSignature":{"ProviderId":"locations/2F62E3E4-6766-E211-8859-00155D0A3228","DisplayCategory":null,"NameSigningOnBehalfOf":null,"SignedName":"Vorizen Assisted Living","SignedDate":"\/Date(1380513600000)\/","ClientPersonSignatureId":null,"SignedDateFormatted":"09/30/2013"},"TransitionServiceTypeId":null,"TransitionServiceTypeSpecifyOther":null,"TransitionServiceType":{"Id":null,"Category":null,"ParentId":null,"Abbreviation":null,"Name":null,"Description":null,"SortOrder":null,"Inactive":false,"RuleAttributes":[]},"RatePrecision":2}];

        self.isApprovedProvisional = false;
        self.isProvisional = false;
        self.hideNurseMonitoringFrequency = false;
        self.serviceToView = ko.observable(new PlanOfServiceService());
        var serviceDataList = [];
        self.serviceDataList = buildServiceDataGroups(serviceDataList);
        self.unitTypes = [{"Selected":false,"Text":"Hours:","Value":"Hours"},{"Selected":false,"Text":"Items:","Value":"Items"},{"Selected":false,"Text":"Days:","Value":"Days"}];
        self.transitionServiceTypes = [{"Selected":false,"Text":"Funds to obtain housing","Value":"transitionservicereasons/-1"},{"Selected":false,"Text":"Funds to secure essential utilities","Value":"transitionservicereasons/-2"},{"Selected":false,"Text":"Funds for basic furniture","Value":"transitionservicereasons/-3"},{"Selected":false,"Text":"Funds for small appliances or other approved appliances","Value":"transitionservicereasons/-4"},{"Selected":false,"Text":"Funds for essential personal or household items","Value":"transitionservicereasons/-5"},{"Selected":false,"Text":"Funds for transition related transportation","Value":"transitionservicereasons/-6"},{"Selected":false,"Text":"Other","Value":"transitionservicereasons/-7"}];
        self.fiProviders = [];
        self.mfpFlexibleFundsServiceTypes = [{"Selected":false,"Text":"Accessibility Equipment","Value":"mfpflexiblefundsservicetypes/-1"},{"Selected":false,"Text":"Companion Animal","Value":"mfpflexiblefundsservicetypes/-2"},{"Selected":false,"Text":"Groceries","Value":"mfpflexiblefundsservicetypes/-3"},{"Selected":false,"Text":"Home Repairs","Value":"mfpflexiblefundsservicetypes/-4"},{"Selected":false,"Text":"Non-Medical Transportation for Community Integration","Value":"mfpflexiblefundsservicetypes/-5"},{"Selected":false,"Text":"Non-Medical Transportation to Secure Housing","Value":"mfpflexiblefundsservicetypes/-6"},{"Selected":false,"Text":"Nutritional Supplements","Value":"mfpflexiblefundsservicetypes/-7"},{"Selected":false,"Text":"OTC Medication","Value":"mfpflexiblefundsservicetypes/-8"},{"Selected":false,"Text":"Other","Value":"mfpflexiblefundsservicetypes/-9"},{"Selected":false,"Text":"Pest Eradication","Value":"mfpflexiblefundsservicetypes/-10"},{"Selected":false,"Text":"Pet Supplies","Value":"mfpflexiblefundsservicetypes/-11"},{"Selected":false,"Text":"Rehabilitation Equipment","Value":"mfpflexiblefundsservicetypes/-12"}];

        self.flexibleBudgetServices = ko.observableArray(ko.utils.arrayMap(flexibleBudgetServices, function(posService) {
            return new PlanOfServiceService(posService);
        }));

        self.allOtherServices = ko.observableArray(ko.utils.arrayMap(allOtherServices, function(posService) {
            return new PlanOfServiceService(posService);
        }));

        self.allServices = self.flexibleBudgetServices().concat(self.allOtherServices());

        self.viewPlanServiceFromId = function(id) {
            var planServiceToView = ko.utils.arrayFirst(self.allServices, function (planService) {
                return planService.ServiceId() == id;
            });
            if (planServiceToView) {
                self.viewPlanOfServiceService(planServiceToView);
            }
        }

        self.viewParentPlanServiceFromId = function(id) {
            var planServiceToView = ko.utils.arrayFirst(self.allServices, function (planService) {
                return planService.ServiceId() == id;
            });
            if (planServiceToView) {
                self.viewPlanOfServiceService(planServiceToView.ParentPlanService);
            }
        }

        self.getServiceJsObjectFromId = function(planServiceId) {
            var planServiceKo = ko.utils.arrayFirst(self.allServices, function (ps) {
                return ps.ServiceId() == planServiceId;
            });
            var planServiceAsJs = ko.toJS(planServiceKo);

            return planServiceAsJs;
        }

        self.viewPlanOfServiceService = function(posService) {
            posService.InQuickView(true);
            self.serviceToView(posService);

            var viewServiceWindow = $("#serviceViewWindow").kendoWindow({
                title: "Service",
                visible: false,
                draggable:false,
                animation: {
                    open: {
                        duration: 0,
                    }
                },
                minWidth: "750px",
                modal: true
            }).data("kendoWindow");

            $(window).resize(function(){
                viewServiceWindow.center();
            });

            $("#serviceViewWindowClose").click(function() {
                viewServiceWindow.close();
            });

            viewServiceWindow.center();
            viewServiceWindow.open();
            setTimeout(function() {
                $(window).resize();
            }, 10);
        };

        self.viewWindowAfterRender = function(elements) {
            replaceSelectsWithTextboxes(elements);
            convertCompleteReqToSubmitReq(elements);
            makeTemplateReadonly(elements);
        };
    }

    var serviceViewModel = new ViewServicesViewModel();
    ko.applyBindings(serviceViewModel, document.getElementById("servicesListDiv"));
    var showPlanServicePopup = serviceViewModel.viewPlanServiceFromId;
    var showParentPlanServicePopup = serviceViewModel.viewParentPlanServiceFromId;

    $(document).ready(function() {

        // window.load to run after the last document.ready since the datatables get set up inside an early document.ready
        $(window).load(function() {



            var $flexibleServicesTable = $("#flexibleServicesTable");
            var $nonFlexibleServicesTable = $("#nonFlexibleServicesTable");

            setUpChildform-groupsForTable($flexibleServicesTable, serviceViewModel);
            setUpChildform-groupsForTable($nonFlexibleServicesTable, serviceViewModel);

            $("#showDeletedServices").click(function() {
                if ($(this).is(':checked')) {
                    $flexibleServicesTable.find("[data-service-is-deleted]").show();
                    $nonFlexibleServicesTable.find("[data-service-is-deleted]").show();
                } else {
                    $flexibleServicesTable.find("[data-service-is-deleted]").hide();
                    $nonFlexibleServicesTable.find("[data-service-is-deleted]").hide();
                }
            });
        });
    });
</script>

<fieldset class="fieldset-container-one" role="presentation">
    <legend class="legend-header-one" role="presentation">POS Costs</legend>
    <div class="column-left">
        <div class="form-group">
            <span class="label">Annual Waiver Plan Services Total:</span>
            <span class="data-element">


$23,212.64
            </span>
        </div>
        <div class="form-group">
            <span class="label">Annual State Plan Services Total:</span>
            <span class="data-element">


$2,274.00
            </span>
        </div>
        <div class="form-group">
            <span class="label">CFC Fixed Budget Total:</span>
            <span class="data-element">


$3,121.25
            </span>
        </div>
        <div class="form-group">
            <span class="label">CFC Flexible Budget Total:</span>
            <span class="data-element">


$0.00
            </span>
        </div>
        <hr>
        <div class="form-group">
            <span class="label"><strong>Total POS Cost:</strong>
            </span>
            <span class="data-element">
                <strong>

                    $28,607.89</strong>
            </span>
        </div>
    </div>
    <div class="column-right">
        <div class="form-group">
            <span class="label">Annual Non-Medicaid Service Total:</span>
            <span class="data-element">


$0.00
            </span>
        </div>
        <div class="form-group">
            <span class="label">MFP Flexible Funds Total:</span>
            <span class="data-element">


$0.00
            </span>
            <span class="label-info">(POS total costs does not include Annual Non-Medicaid Services or MFP Flexible Funds)</span>
        </div>
    </div>
</fieldset>


</div>
</div>